<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù…Ø­Ø±Ùƒ Ø§Ù„ØªØ´Ø®ÙŠØµ Ø§Ù„ØªØ³ÙˆÙŠÙ‚ÙŠ â€” Ø§Ù„ÙˆØ­Ø¯Ø§Øª 1 + 2 + 3</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;900&display=swap" rel="stylesheet">
<style>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   DESIGN TOKENS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
:root {
  --bg:       #0a0c10;
  --surface:  #111318;
  --surface2: #161920;
  --surface3: #0e1015;
  --border:   #1e2229;
  --gold:     #c9a84c;
  --gold-dim: #8a6f2e;
  --gold-pale:rgba(201,168,76,0.08);
  --text:     #e8e6e1;
  --muted:    #6b7280;
  --danger:   #c0392b;
  --success:  #27ae60;
  --blue:     #3b82f6;
  --purple:   #8b5cf6;
  --teal:     #14b8a6;
}
* { margin:0; padding:0; box-sizing:border-box; }
body {
  font-family:'Cairo',sans-serif; background:var(--bg); color:var(--text);
  min-height:100vh; display:flex; flex-direction:column;
  align-items:center; justify-content:flex-start; padding:20px 20px 80px; overflow-x:hidden;
}
body::before {
  content:''; position:fixed; inset:0;
  background-image:linear-gradient(rgba(201,168,76,0.03) 1px,transparent 1px),
                   linear-gradient(90deg,rgba(201,168,76,0.03) 1px,transparent 1px);
  background-size:60px 60px; pointer-events:none; z-index:0;
}
body::after {
  content:''; position:fixed; top:-200px; left:50%; transform:translateX(-50%);
  width:800px; height:400px;
  background:radial-gradient(ellipse,rgba(201,168,76,0.06) 0%,transparent 70%);
  pointer-events:none; z-index:0;
}
.wrapper { position:relative; z-index:1; width:100%; max-width:740px; padding-top:24px; }

/* â”€â”€ Header â”€â”€ */
.header { display:flex; align-items:center; justify-content:space-between; margin-bottom:28px; opacity:0; animation:fadeUp 0.6s ease forwards; }
.logo { font-size:13px; font-weight:700; letter-spacing:3px; color:var(--gold); text-transform:uppercase; }
.session-badge { font-size:11px; color:var(--muted); font-weight:300; }
.unit-tag { font-size:10px; font-weight:700; letter-spacing:2px; background:rgba(201,168,76,0.12); color:var(--gold-dim); padding:3px 10px; border-radius:20px; border:1px solid var(--gold-dim); transition:all 0.3s; }

/* â”€â”€ Progress â”€â”€ */
.progress-area { margin-bottom:28px; opacity:0; animation:fadeUp 0.6s 0.1s ease forwards; }
.progress-meta { display:flex; justify-content:space-between; font-size:12px; color:var(--muted); margin-bottom:10px; }
.progress-track { height:2px; background:var(--border); border-radius:2px; overflow:hidden; }
.progress-fill { height:100%; background:linear-gradient(90deg,var(--gold-dim),var(--gold)); border-radius:2px; transition:width 0.5s cubic-bezier(0.4,0,0.2,1); }
.step-dots { display:flex; gap:5px; margin-top:10px; flex-wrap:wrap; }
.step-dot { width:6px; height:6px; border-radius:50%; background:var(--border); transition:all 0.3s; }
.step-dot.done    { background:var(--gold-dim); }
.step-dot.current { background:var(--gold); transform:scale(1.4); }

/* â”€â”€ Card â”€â”€ */
.card { background:var(--surface); border:1px solid var(--border); border-radius:16px; padding:40px; position:relative; overflow:hidden; }
.card::before { content:''; position:absolute; top:0; right:0; width:120px; height:120px; background:radial-gradient(circle at top right,rgba(201,168,76,0.05),transparent 70%); pointer-events:none; }

/* â”€â”€ Screens â”€â”€ */
.screen,.output-screen { display:none; animation:slideIn 0.4s cubic-bezier(0.4,0,0.2,1) forwards; }
.screen.active,.output-screen.active { display:block; }
@keyframes slideIn { from{opacity:0;transform:translateY(16px)} to{opacity:1;transform:translateY(0)} }
@keyframes fadeUp  { from{opacity:0;transform:translateY(12px)} to{opacity:1;transform:translateY(0)} }
@keyframes spin    { from{transform:rotate(0deg)} to{transform:rotate(360deg)} }
@keyframes pulse   { 0%,100%{opacity:1} 50%{opacity:0.5} }

.screen-number { font-size:11px; letter-spacing:3px; color:var(--gold-dim); font-weight:600; text-transform:uppercase; margin-bottom:16px; }
.question { font-size:22px; font-weight:700; line-height:1.5; margin-bottom:8px; }
.question-hint { font-size:13px; color:var(--muted); margin-bottom:28px; font-weight:300; }

/* â”€â”€ Options â”€â”€ */
.options { display:grid; grid-template-columns:1fr 1fr; gap:10px; }
.options.single-col { grid-template-columns:1fr; }
.option-btn {
  background:transparent; border:1px solid var(--border); border-radius:10px;
  padding:14px 18px; color:var(--text); font-family:'Cairo',sans-serif;
  font-size:14px; font-weight:600; cursor:pointer; text-align:right;
  transition:all 0.2s; position:relative; overflow:hidden;
}
.option-btn::before { content:''; position:absolute; inset:0; background:linear-gradient(135deg,rgba(201,168,76,0.05),transparent); opacity:0; transition:opacity 0.2s; }
.option-btn:hover { border-color:var(--gold-dim); color:var(--gold); transform:translateY(-1px); }
.option-btn:hover::before { opacity:1; }
.option-btn.selected { border-color:var(--gold); background:rgba(201,168,76,0.08); color:var(--gold); }

/* â”€â”€ Input â”€â”€ */
.input-group { display:flex; flex-direction:column; gap:10px; }
.text-input {
  background:transparent; border:1px solid var(--border); border-radius:10px;
  padding:14px 18px; color:var(--text); font-family:'Cairo',sans-serif;
  font-size:15px; font-weight:600; text-align:right; transition:border-color 0.2s; outline:none; width:100%;
}
.text-input:focus { border-color:var(--gold-dim); }
.text-input::placeholder { color:var(--muted); font-weight:300; }
.or-divider { text-align:center; color:var(--muted); font-size:12px; letter-spacing:2px; margin:4px 0; }

/* â”€â”€ Actions â”€â”€ */
.action-bar { display:flex; justify-content:space-between; align-items:center; margin-top:28px; gap:12px; }
.btn-back {
  background:transparent; border:1px solid var(--border); border-radius:10px;
  padding:12px 22px; color:var(--muted); font-family:'Cairo',sans-serif;
  font-size:13px; font-weight:600; cursor:pointer; transition:all 0.2s;
}
.btn-back:hover { border-color:var(--muted); color:var(--text); }
.btn-back:disabled { opacity:0.3; cursor:not-allowed; }
.btn-next {
  background:linear-gradient(135deg,var(--gold-dim),var(--gold)); border:none; border-radius:10px;
  padding:13px 32px; color:#0a0c10; font-family:'Cairo',sans-serif;
  font-size:14px; font-weight:900; cursor:pointer; transition:all 0.2s; flex:1; max-width:220px;
}
.btn-next:hover { opacity:0.9; transform:translateY(-1px); }
.btn-next:disabled { opacity:0.4; cursor:not-allowed; transform:none; }
.error-msg { font-size:12px; color:var(--danger); margin-top:10px; display:none; }
.error-msg.visible { display:block; }

/* â”€â”€ Greeting â”€â”€ */
.greeting-screen { text-align:center; padding:20px 0; }
.greeting-icon { font-size:48px; margin-bottom:16px; display:block; }
.greeting-title { font-size:28px; font-weight:900; color:var(--gold); margin-bottom:12px; }
.greeting-sub { font-size:15px; color:var(--muted); font-weight:300; line-height:1.7; margin-bottom:32px; }
.btn-start { background:linear-gradient(135deg,var(--gold-dim),var(--gold)); border:none; border-radius:12px; padding:16px 48px; color:#0a0c10; font-family:'Cairo',sans-serif; font-size:16px; font-weight:900; cursor:pointer; transition:all 0.2s; }
.btn-start:hover { opacity:0.9; transform:translateY(-2px); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   UNIT 2 RESULTS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.processing-screen { text-align:center; padding:40px 0; }
.processing-icon { font-size:48px; margin-bottom:20px; display:block; }
.processing-title { font-size:20px; font-weight:700; color:var(--gold); margin-bottom:8px; }
.processing-sub { font-size:14px; color:var(--muted); }
.processing-steps { display:flex; flex-direction:column; gap:8px; margin-top:24px; }
.proc-step { font-size:13px; color:var(--muted); display:flex; align-items:center; gap:10px; justify-content:center; }
.proc-step.active { color:var(--gold); animation:pulse 1s infinite; }
.proc-step.done { color:var(--success); }

/* â”€â”€ Section labels â”€â”€ */
.section-label { font-size:10px; letter-spacing:3px; font-weight:700; text-transform:uppercase; color:var(--muted); margin-bottom:12px; margin-top:24px; display:flex; align-items:center; gap:8px; }
.section-label::after { content:''; flex:1; height:1px; background:var(--border); }

/* â”€â”€ Block cards (Unit 2) â”€â”€ */
.blocks-list { display:flex; flex-direction:column; gap:10px; }
.block-card { border:1px solid var(--border); border-radius:12px; overflow:hidden; transition:border-color 0.2s; }
.block-card:hover { border-color:var(--gold-dim); }
.block-card-inner { display:flex; align-items:center; gap:16px; padding:16px 20px; }
.block-card.fixed-block  { border-right:3px solid var(--gold); }
.block-card.sector-block { border-right:3px solid var(--blue); }
.block-card.anchor-block { border-right:3px solid var(--purple); }
.block-card.rank-1 { border-right:3px solid #f59e0b; }
.block-card.rank-2 { border-right:3px solid #94a3b8; }
.block-card.rank-3 { border-right:3px solid #cd7f32; }
.block-card.rank-other { border-right:3px solid #374151; }
.block-icon { font-size:26px; flex-shrink:0; width:36px; text-align:center; }
.block-info { flex:1; min-width:0; }
.block-name { font-size:15px; font-weight:700; margin-bottom:2px; }
.block-range { font-size:11px; color:var(--muted); font-weight:300; letter-spacing:1px; }
.block-badge { font-size:10px; font-weight:700; letter-spacing:1px; padding:3px 10px; border-radius:20px; flex-shrink:0; }
.badge-fixed  { background:rgba(201,168,76,0.12); color:var(--gold); border:1px solid var(--gold-dim); }
.badge-sector { background:rgba(59,130,246,0.12); color:var(--blue); border:1px solid rgba(59,130,246,0.3); }
.badge-anchor { background:rgba(139,92,246,0.12); color:var(--purple); border:1px solid rgba(139,92,246,0.3); }
.badge-rank { width:32px; height:32px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:13px; font-weight:900; flex-shrink:0; }
.badge-rank.r1 { background:rgba(245,158,11,0.15); color:#f59e0b; border:1px solid rgba(245,158,11,0.4); }
.badge-rank.r2 { background:rgba(148,163,184,0.15); color:#94a3b8; border:1px solid rgba(148,163,184,0.4); }
.badge-rank.r3 { background:rgba(205,127,50,0.15); color:#cd7f32; border:1px solid rgba(205,127,50,0.4); }
.badge-rank.rn { background:rgba(55,65,81,0.3); color:var(--muted); border:1px solid var(--border); }
.block-score-wrap { display:flex; flex-direction:column; align-items:flex-end; gap:6px; flex-shrink:0; }
.block-score-num { font-size:22px; font-weight:900; color:var(--gold); line-height:1; }
.block-score-label { font-size:10px; color:var(--muted); letter-spacing:1px; }
.score-bar-wrap { padding:0 20px 14px; }
.score-bar-track { height:3px; background:var(--border); border-radius:3px; overflow:hidden; }
.score-bar-fill { height:100%; background:linear-gradient(90deg,var(--gold-dim),var(--gold)); border-radius:3px; transition:width 0.8s cubic-bezier(0.4,0,0.2,1); }
.breakdown-toggle { background:none; border:none; color:var(--muted); font-family:'Cairo',sans-serif; font-size:11px; cursor:pointer; padding:0 20px 14px; text-decoration:underline; text-underline-offset:3px; display:block; width:100%; text-align:right; }
.breakdown-panel { display:none; padding:0 20px 16px; grid-template-columns:1fr 1fr; gap:6px 16px; }
.breakdown-panel.open { display:grid; }
.bk-row { display:flex; justify-content:space-between; font-size:12px; }
.bk-label { color:var(--muted); }
.bk-val.pos { color:var(--success); font-weight:700; }
.bk-val.neg { color:var(--danger); font-weight:700; }
.bk-val.zero { color:var(--muted); }
.excluded-toggle { background:none; border:1px solid var(--border); border-radius:10px; padding:12px 20px; color:var(--muted); font-family:'Cairo',sans-serif; font-size:13px; cursor:pointer; width:100%; text-align:right; margin-top:20px; transition:all 0.2s; }
.excluded-toggle:hover { border-color:var(--gold-dim); color:var(--text); }
.excluded-list { display:none; margin-top:12px; }
.excluded-list.open { display:flex; flex-direction:column; gap:8px; }
.excluded-item { background:var(--surface2); border:1px solid var(--border); border-radius:10px; padding:12px 16px; display:flex; justify-content:space-between; align-items:center; gap:12px; }
.excluded-name { font-size:14px; font-weight:700; }
.excluded-reason { font-size:12px; color:var(--danger); flex:1; text-align:left; }
.excluded-score { font-size:12px; color:var(--muted); flex-shrink:0; }
.warning-box { background:rgba(192,57,43,0.08); border:1px solid rgba(192,57,43,0.3); border-radius:12px; padding:16px 20px; margin-bottom:24px; display:none; font-size:13px; color:#e74c3c; font-weight:600; line-height:1.6; gap:10px; align-items:flex-start; }
.warning-box.visible { display:flex; }
.meta-chip { font-size:11px; font-weight:700; letter-spacing:1px; padding:3px 10px; border-radius:20px; }
.meta-chip.fast      { background:rgba(59,130,246,0.12); color:var(--blue); border:1px solid rgba(59,130,246,0.3); }
.meta-chip.sustained { background:rgba(39,174,96,0.12); color:var(--success); border:1px solid rgba(39,174,96,0.3); }
.meta-chip.quota     { background:rgba(201,168,76,0.12); color:var(--gold); border:1px solid var(--gold-dim); }
.results-header { display:flex; align-items:flex-start; gap:16px; margin-bottom:28px; padding-bottom:24px; border-bottom:1px solid var(--border); }
.results-icon { width:48px; height:48px; background:rgba(39,174,96,0.12); border:1px solid rgba(39,174,96,0.3); border-radius:12px; display:flex; align-items:center; justify-content:center; font-size:22px; flex-shrink:0; }
.results-title { font-size:22px; font-weight:900; margin-bottom:4px; }
.results-sub { font-size:13px; color:var(--muted); font-weight:300; }
.results-meta { margin-right:auto; text-align:left; display:flex; flex-direction:column; gap:4px; align-items:flex-end; }
.json-toggle { background:transparent; border:1px solid var(--gold-dim); border-radius:10px; padding:12px 20px; color:var(--gold); font-family:'Cairo',sans-serif; font-size:13px; font-weight:600; cursor:pointer; transition:all 0.2s; width:100%; margin-top:12px; }
.json-toggle:hover { background:rgba(201,168,76,0.08); }
.json-section { display:none; margin-top:12px; }
.json-section.open { display:block; }
.json-box { background:#080a0d; border:1px solid var(--border); border-radius:10px; padding:20px; font-family:'Courier New',monospace; font-size:11.5px; line-height:1.7; color:#a8d5a2; max-height:380px; overflow-y:auto; white-space:pre; direction:ltr; text-align:left; }
.json-box::-webkit-scrollbar { width:4px; }
.json-box::-webkit-scrollbar-thumb { background:var(--border); border-radius:2px; }
.copy-btn { margin-top:10px; background:transparent; border:1px solid var(--border); border-radius:10px; padding:10px 20px; color:var(--muted); font-family:'Cairo',sans-serif; font-size:13px; font-weight:600; cursor:pointer; transition:all 0.2s; width:100%; }
.copy-btn:hover { border-color:var(--gold-dim); color:var(--gold); }
.proceed-btn { background:linear-gradient(135deg,var(--gold-dim),var(--gold)); border:none; border-radius:12px; padding:15px 40px; color:#0a0c10; font-family:'Cairo',sans-serif; font-size:15px; font-weight:900; cursor:pointer; transition:all 0.2s; width:100%; margin-top:20px; }
.proceed-btn:hover { opacity:0.9; transform:translateY(-1px); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   UNIT 3 RESULTS â€” SERVICE RECOMMENDATION CARDS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

/* AI loading indicator */
.ai-loading-bar {
  height:3px; background:var(--border); border-radius:3px; overflow:hidden;
  margin-top:20px; position:relative;
}
.ai-loading-bar::after {
  content:''; position:absolute; top:0; right:-50%; width:50%; height:100%;
  background:linear-gradient(90deg,transparent,var(--gold),transparent);
  animation:shimmer 1.5s infinite;
}
@keyframes shimmer { from{right:-50%} to{right:150%} }

/* â”€â”€ Recommendation block â”€â”€ */
.rec-block {
  border:1px solid var(--border); border-radius:16px; overflow:hidden;
  margin-bottom:20px; transition:border-color 0.3s;
}
.rec-block:hover { border-color:var(--gold-dim); }

/* Block type border */
.rec-block.type-fixed   { border-right:3px solid var(--gold); }
.rec-block.type-sector  { border-right:3px solid var(--blue); }
.rec-block.type-anchor  { border-right:3px solid var(--purple); }
.rec-block.type-rank-1  { border-right:3px solid #f59e0b; }
.rec-block.type-rank-2  { border-right:3px solid #94a3b8; }
.rec-block.type-rank-3  { border-right:3px solid #cd7f32; }
.rec-block.type-rank-n  { border-right:3px solid #374151; }

/* Block header */
.rec-block-header {
  display:flex; align-items:center; gap:14px; padding:16px 20px;
  background:rgba(255,255,255,0.02); border-bottom:1px solid var(--border);
  cursor:pointer; user-select:none;
}
.rec-block-header:hover { background:rgba(201,168,76,0.04); }
.rec-block-icon { font-size:24px; flex-shrink:0; }
.rec-block-info { flex:1; }
.rec-block-name { font-size:15px; font-weight:700; }
.rec-block-subtitle { font-size:11px; color:var(--muted); font-weight:300; letter-spacing:1px; }
.rec-block-chevron { color:var(--muted); font-size:16px; transition:transform 0.3s; }
.rec-block.open .rec-block-chevron { transform:rotate(180deg); }

/* Foundation banner â€” prepended service */
.foundation-banner {
  background:rgba(201,168,76,0.06); border-bottom:1px solid rgba(201,168,76,0.15);
  padding:12px 20px; display:flex; align-items:center; gap:12px;
}
.foundation-icon { font-size:18px; }
.foundation-label { font-size:11px; letter-spacing:2px; font-weight:700; color:var(--gold-dim); text-transform:uppercase; display:block; margin-bottom:2px; }
.foundation-name { font-size:13px; font-weight:700; color:var(--gold); }
.foundation-sub { font-size:11px; color:var(--muted); }

/* Block body */
.rec-block-body { display:none; }
.rec-block.open .rec-block-body { display:block; }

/* Featured service card */
.featured-svc {
  padding:20px; border-bottom:1px solid var(--border);
  position:relative; overflow:hidden;
}
.featured-svc::before {
  content:''; position:absolute; top:0; left:0; right:0; height:2px;
  background:linear-gradient(90deg,transparent,var(--gold-dim),transparent);
}
.featured-badge {
  font-size:10px; letter-spacing:2px; font-weight:700; text-transform:uppercase;
  color:var(--gold-dim); margin-bottom:10px; display:flex; align-items:center; gap:6px;
}
.featured-badge::before { content:'â˜…'; color:var(--gold); }

.featured-top { display:flex; justify-content:space-between; align-items:flex-start; gap:12px; margin-bottom:14px; }
.featured-name { font-size:17px; font-weight:900; line-height:1.3; }
.featured-id { font-size:11px; color:var(--muted); margin-top:3px; }

/* Confidence ring */
.confidence-ring {
  flex-shrink:0; width:54px; height:54px; position:relative;
  display:flex; align-items:center; justify-content:center;
}
.confidence-ring svg { position:absolute; top:0; left:0; transform:rotate(-90deg); }
.confidence-ring circle { fill:none; stroke-width:3; }
.confidence-ring .track { stroke:var(--border); }
.confidence-ring .fill { stroke:var(--gold); stroke-linecap:round; transition:stroke-dashoffset 1s ease; }
.confidence-num { font-size:13px; font-weight:900; color:var(--gold); }
.confidence-pct { font-size:9px; color:var(--muted); display:block; text-align:center; margin-top:-2px; }

/* Service meta row */
.svc-meta-row { display:flex; gap:10px; flex-wrap:wrap; margin-bottom:14px; }
.svc-chip { font-size:12px; font-weight:600; padding:4px 12px; border-radius:20px; }
.chip-price    { background:rgba(39,174,96,0.1);  color:var(--success); border:1px solid rgba(39,174,96,0.25); }
.chip-duration { background:rgba(59,130,246,0.1); color:var(--blue);    border:1px solid rgba(59,130,246,0.25); }
.chip-override { background:rgba(139,92,246,0.1); color:var(--purple);  border:1px solid rgba(139,92,246,0.25); font-size:10px; letter-spacing:1px; }

/* Justification */
.justification-wrap { margin-bottom:14px; }
.justification-label { font-size:10px; letter-spacing:2px; color:var(--gold-dim); font-weight:700; text-transform:uppercase; margin-bottom:6px; }
.justification-text {
  font-size:14px; color:var(--text); line-height:1.7; font-style:italic;
  padding: 10px 14px; background:rgba(201,168,76,0.04); border-right:2px solid var(--gold-dim);
  border-radius:0 8px 8px 0;
}
.justification-text.loading { color:var(--muted); animation:pulse 1.5s infinite; }

/* KPI & warranty */
.svc-details { display:grid; grid-template-columns:1fr 1fr; gap:10px; }
.svc-detail-box { background:var(--surface2); border:1px solid var(--border); border-radius:8px; padding:10px 12px; }
.svc-detail-label { font-size:10px; letter-spacing:1px; color:var(--muted); text-transform:uppercase; margin-bottom:4px; display:block; }
.svc-detail-val { font-size:12px; font-weight:600; line-height:1.4; }

/* Supporting services */
.supporting-wrap { padding:16px 20px; }
.supporting-label { font-size:10px; letter-spacing:2px; font-weight:700; text-transform:uppercase; color:var(--muted); margin-bottom:10px; }
.supporting-list { display:flex; gap:10px; flex-direction:column; }
.supporting-card {
  background:var(--surface2); border:1px solid var(--border); border-radius:10px;
  padding:12px 16px; display:flex; justify-content:space-between; align-items:center; gap:10px;
  transition:border-color 0.2s;
}
.supporting-card:hover { border-color:var(--border); }
.supp-name { font-size:13px; font-weight:700; }
.supp-meta { display:flex; gap:6px; align-items:center; flex-shrink:0; }
.supp-price { font-size:12px; color:var(--success); font-weight:600; }
.supp-badge { font-size:10px; color:var(--muted); padding:2px 8px; border:1px solid var(--border); border-radius:10px; }

/* â”€â”€ Summary footer â”€â”€ */
.summary-footer {
  margin-top:28px; padding-top:24px; border-top:1px solid var(--border);
}
.summary-grid { display:grid; grid-template-columns:1fr 1fr 1fr; gap:12px; margin-bottom:20px; }
.summary-box { background:var(--surface2); border:1px solid var(--border); border-radius:12px; padding:16px; text-align:center; }
.summary-val { font-size:22px; font-weight:900; color:var(--gold); }
.summary-label { font-size:11px; color:var(--muted); margin-top:4px; font-weight:300; }

/* â”€â”€ Responsive â”€â”€ */
@media (max-width:560px) {
  .card { padding:24px 16px; }
  .options { grid-template-columns:1fr; }
  .question { font-size:18px; }
  .svc-details { grid-template-columns:1fr; }
  .summary-grid { grid-template-columns:1fr 1fr; }
  .featured-top { flex-direction:column; }
  .confidence-ring { align-self:flex-start; }
}
</style>
</head>
<body>
<div class="wrapper">

  <!-- â”€â”€ Header â”€â”€ -->
  <div class="header">
    <span class="logo">Ø§Ù„ØªØ´Ø®ÙŠØµ Ø§Ù„ØªØ³ÙˆÙŠÙ‚ÙŠ</span>
    <span class="unit-tag" id="unitTag">UNIT 1</span>
    <span class="session-badge" id="sessionId">Ø¬Ù„Ø³Ø©: â€”</span>
  </div>

  <!-- â”€â”€ Progress (Unit 1 only) â”€â”€ -->
  <div class="progress-area" id="progressArea" style="display:none">
    <div class="progress-meta">
      <span id="progressLabel">Ø§Ù„Ø³Ø¤Ø§Ù„ 1 Ù…Ù† 15</span>
      <span id="progressPercent">0%</span>
    </div>
    <div class="progress-track"><div class="progress-fill" id="progressFill" style="width:0%"></div></div>
    <div class="step-dots" id="stepDots"></div>
  </div>

  <!-- â•â• MAIN CARD â•â• -->
  <div class="card" id="mainCard">

    <!-- Greeting -->
    <div class="screen active" id="screen-greeting">
      <div class="greeting-screen">
        <span class="greeting-icon">ğŸ¯</span>
        <div class="greeting-title">Ù…Ø­Ø±Ùƒ Ø§Ù„ØªØ´Ø®ÙŠØµ Ø§Ù„ØªØ³ÙˆÙŠÙ‚ÙŠ</div>
        <div class="greeting-sub">
          Ø¨Ø¶Ø¹Ø© Ø£Ø³Ø¦Ù„Ø© Ø¯Ù‚ÙŠÙ‚Ø© â€” ØªØ´Ø®ÙŠØµ Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠ ÙƒØ§Ù…Ù„ Ù…Ø¹ Ø®Ø·Ø© Ø®Ø¯Ù…Ø§Øª Ù…ÙØ®ØµØµØ©.<br>
          Ø§Ù„Ø¬Ù„Ø³Ø© Ù„Ø§ ØªØ³ØªØºØ±Ù‚ Ø£ÙƒØ«Ø± Ù…Ù† 3 Ø¯Ù‚Ø§Ø¦Ù‚.
        </div>
        <button class="btn-start" onclick="startSession()">Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØ´Ø®ÙŠØµ â†</button>
      </div>
    </div>

    <!-- â•â•â•â• UNIT 1 SCREENS â•â•â•â• -->
    <!-- S0: sector -->
    <div class="screen" id="screen-0">
      <div class="screen-number">Ø§Ù„Ø³Ø¤Ø§Ù„ 1 â€” Ø§Ù„Ù‚Ø·Ø§Ø¹</div>
      <div class="question">ÙÙŠ Ø£ÙŠ Ù‚Ø·Ø§Ø¹ ÙŠØ¹Ù…Ù„ Ø¹Ù…Ù„ÙƒØŸ</div>
      <div class="options" id="opts-0"></div>
      <div class="error-msg" id="err-0">ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø¥Ø¬Ø§Ø¨Ø© Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©</div>
      <div class="action-bar"><button class="btn-back" onclick="goBack()" disabled>Ø±Ø¬ÙˆØ¹</button><button class="btn-next" id="next-0" onclick="nextScreen()" disabled>Ø§Ù„ØªØ§Ù„ÙŠ â†’</button></div>
    </div>
    <!-- S1: geo_focus -->
    <div class="screen" id="screen-1">
      <div class="screen-number">Ø§Ù„Ø³Ø¤Ø§Ù„ 2 â€” Ø§Ù„Ù†Ø·Ø§Ù‚ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ</div>
      <div class="question">Ù…Ø§ Ø§Ù„Ù†Ø·Ø§Ù‚ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ Ù„Ø¹Ù…Ù„ÙƒØŸ</div>
      <div class="options" id="opts-1"></div>
      <div class="error-msg" id="err-1">ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø¥Ø¬Ø§Ø¨Ø© Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©</div>
      <div class="action-bar"><button class="btn-back" onclick="goBack()">Ø±Ø¬ÙˆØ¹</button><button class="btn-next" id="next-1" onclick="nextScreen()" disabled>Ø§Ù„ØªØ§Ù„ÙŠ â†’</button></div>
    </div>
    <!-- S2: type -->
    <div class="screen" id="screen-2">
      <div class="screen-number">Ø§Ù„Ø³Ø¤Ø§Ù„ 3 â€” Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø¹Ù…Ù„</div>
      <div class="question">ÙƒÙŠÙ ØªØµÙ Ù…Ø±Ø­Ù„Ø© Ø¹Ù…Ù„Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠØ©ØŸ</div>
      <div class="options single-col" id="opts-2"></div>
      <div class="error-msg" id="err-2">ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø¥Ø¬Ø§Ø¨Ø© Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©</div>
      <div class="action-bar"><button class="btn-back" onclick="goBack()">Ø±Ø¬ÙˆØ¹</button><button class="btn-next" id="next-2" onclick="nextScreen()" disabled>Ø§Ù„ØªØ§Ù„ÙŠ â†’</button></div>
    </div>
    <!-- S3: product_stage (startup only) -->
    <div class="screen" id="screen-3">
      <div class="screen-number">Ø§Ù„Ø³Ø¤Ø§Ù„ 3Ø£ â€” Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ù…Ù†ØªØ¬</div>
      <div class="question">ÙÙŠ Ø£ÙŠ Ù…Ø±Ø­Ù„Ø© ØªØ­Ø¯ÙŠØ¯Ø§Ù‹ ØªÙˆØ¬Ø¯ Ø§Ù„Ø¢Ù†ØŸ</div>
      <div class="options single-col" id="opts-3"></div>
      <div class="error-msg" id="err-3">ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø¥Ø¬Ø§Ø¨Ø© Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©</div>
      <div class="action-bar"><button class="btn-back" onclick="goBack()">Ø±Ø¬ÙˆØ¹</button><button class="btn-next" id="next-3" onclick="nextScreen()" disabled>Ø§Ù„ØªØ§Ù„ÙŠ â†’</button></div>
    </div>
    <!-- S4: challenge -->
    <div class="screen" id="screen-4">
      <div class="screen-number">Ø§Ù„Ø³Ø¤Ø§Ù„ 4 â€” Ø§Ù„ØªØ­Ø¯ÙŠ Ø§Ù„Ø£ÙƒØ¨Ø±</div>
      <div class="question">Ù…Ø§ Ø§Ù„ØªØ­Ø¯ÙŠ Ø§Ù„Ø£ÙƒØ¨Ø± Ø§Ù„Ø°ÙŠ ØªÙˆØ§Ø¬Ù‡Ù‡ Ø§Ù„Ø¢Ù†ØŸ</div>
      <div class="options" id="opts-4"></div>
      <div class="error-msg" id="err-4">ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø¥Ø¬Ø§Ø¨Ø© Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©</div>
      <div class="action-bar"><button class="btn-back" onclick="goBack()">Ø±Ø¬ÙˆØ¹</button><button class="btn-next" id="next-4" onclick="nextScreen()" disabled>Ø§Ù„ØªØ§Ù„ÙŠ â†’</button></div>
    </div>
    <!-- S5: budget -->
    <div class="screen" id="screen-5">
      <div class="screen-number">Ø§Ù„Ø³Ø¤Ø§Ù„ 5 â€” Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©</div>
      <div class="question">Ù…Ø§ Ù…ÙŠØ²Ø§Ù†ÙŠØªÙƒ Ù„Ù„ØªØ³ÙˆÙŠÙ‚ØŸ</div>
      <div class="options single-col" id="opts-5"></div>
      <div class="error-msg" id="err-5">ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø¥Ø¬Ø§Ø¨Ø© Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©</div>
      <div class="action-bar"><button class="btn-back" onclick="goBack()">Ø±Ø¬ÙˆØ¹</button><button class="btn-next" id="next-5" onclick="nextScreen()" disabled>Ø§Ù„ØªØ§Ù„ÙŠ â†’</button></div>
    </div>
    <!-- S6: budget_period -->
    <div class="screen" id="screen-6">
      <div class="screen-number">Ø§Ù„Ø³Ø¤Ø§Ù„ 5Ø£ â€” ÙØªØ±Ø© Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©</div>
      <div class="question">Ù‡Ø°Ù‡ Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø´Ù‡Ø±ÙŠØ© Ø£Ù… Ø³Ù†ÙˆÙŠØ©ØŸ</div>
      <div class="options" id="opts-6"></div>
      <div class="error-msg" id="err-6">ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø¥Ø¬Ø§Ø¨Ø© Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©</div>
      <div class="action-bar"><button class="btn-back" onclick="goBack()">Ø±Ø¬ÙˆØ¹</button><button class="btn-next" id="next-6" onclick="nextScreen()" disabled>Ø§Ù„ØªØ§Ù„ÙŠ â†’</button></div>
    </div>
    <!-- S7: marketing_history -->
    <div class="screen" id="screen-7">
      <div class="screen-number">Ø§Ù„Ø³Ø¤Ø§Ù„ 6 â€” Ø§Ù„ØªØ¬Ø±Ø¨Ø© Ø§Ù„ØªØ³ÙˆÙŠÙ‚ÙŠØ©</div>
      <div class="question">Ù…Ø§ ØªØ¬Ø±Ø¨ØªÙƒ Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© Ù…Ø¹ Ø§Ù„ØªØ³ÙˆÙŠÙ‚ Ø§Ù„Ø±Ù‚Ù…ÙŠØŸ</div>
      <div class="options single-col" id="opts-7"></div>
      <div class="error-msg" id="err-7">ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø¥Ø¬Ø§Ø¨Ø© Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©</div>
      <div class="action-bar"><button class="btn-back" onclick="goBack()">Ø±Ø¬ÙˆØ¹</button><button class="btn-next" id="next-7" onclick="nextScreen()" disabled>Ø§Ù„ØªØ§Ù„ÙŠ â†’</button></div>
    </div>
    <!-- S8: execution_capacity -->
    <div class="screen" id="screen-8">
      <div class="screen-number">Ø§Ù„Ø³Ø¤Ø§Ù„ 7 â€” Ø·Ø§Ù‚Ø© Ø§Ù„ØªÙ†ÙÙŠØ°</div>
      <div class="question">Ù…Ù† Ø³ÙŠÙ†ÙØ° Ù…Ø¹ÙƒØŸ</div>
      <div class="options single-col" id="opts-8"></div>
      <div class="error-msg" id="err-8">ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø¥Ø¬Ø§Ø¨Ø© Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©</div>
      <div class="action-bar"><button class="btn-back" onclick="goBack()">Ø±Ø¬ÙˆØ¹</button><button class="btn-next" id="next-8" onclick="nextScreen()" disabled>Ø§Ù„ØªØ§Ù„ÙŠ â†’</button></div>
    </div>
    <!-- S9: current_tools -->
    <div class="screen" id="screen-9">
      <div class="screen-number">Ø§Ù„Ø³Ø¤Ø§Ù„ 8 â€” Ø§Ù„Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ø±Ù‚Ù…ÙŠØ©</div>
      <div class="question">Ù…Ø§ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø£Ø¯ÙˆØ§ØªÙƒ Ø§Ù„Ø±Ù‚Ù…ÙŠØ© Ø§Ù„Ø­Ø§Ù„ÙŠØ©ØŸ</div>
      <div class="options single-col" id="opts-9"></div>
      <div class="error-msg" id="err-9">ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø¥Ø¬Ø§Ø¨Ø© Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©</div>
      <div class="action-bar"><button class="btn-back" onclick="goBack()">Ø±Ø¬ÙˆØ¹</button><button class="btn-next" id="next-9" onclick="nextScreen()" disabled>Ø§Ù„ØªØ§Ù„ÙŠ â†’</button></div>
    </div>
    <!-- S10: main_channel -->
    <div class="screen" id="screen-10">
      <div class="screen-number">Ø§Ù„Ø³Ø¤Ø§Ù„ 9 â€” Ø§Ù„Ù‚Ù†Ø§Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</div>
      <div class="question">Ù…Ø§ Ø§Ù„Ù‚Ù†Ø§Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ø§Ù„ØªÙŠ ØªØ£ØªÙŠÙƒ Ù…Ù†Ù‡Ø§ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ØŸ</div>
      <div class="options" id="opts-10"></div>
      <div class="error-msg" id="err-10">ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø¥Ø¬Ø§Ø¨Ø© Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©</div>
      <div class="action-bar"><button class="btn-back" onclick="goBack()">Ø±Ø¬ÙˆØ¹</button><button class="btn-next" id="next-10" onclick="nextScreen()" disabled>Ø§Ù„ØªØ§Ù„ÙŠ â†’</button></div>
    </div>
    <!-- S11: has_website -->
    <div class="screen" id="screen-11">
      <div class="screen-number">Ø§Ù„Ø³Ø¤Ø§Ù„ 10 â€” Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</div>
      <div class="question">Ù‡Ù„ Ù„Ø¯ÙŠÙƒ Ù…ÙˆÙ‚Ø¹ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø¬Ø§Ù‡Ø²ØŸ</div>
      <div class="options" id="opts-11"></div>
      <div class="error-msg" id="err-11">ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø¥Ø¬Ø§Ø¨Ø© Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©</div>
      <div class="action-bar"><button class="btn-back" onclick="goBack()">Ø±Ø¬ÙˆØ¹</button><button class="btn-next" id="next-11" onclick="nextScreen()" disabled>Ø§Ù„ØªØ§Ù„ÙŠ â†’</button></div>
    </div>
    <!-- S12: V â€” visits (conditional) -->
    <div class="screen" id="screen-12">
      <div class="screen-number">Ø§Ù„Ø³Ø¤Ø§Ù„ 11 â€” Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø´Ù‡Ø±ÙŠØ©</div>
      <div class="question">ÙƒÙ… Ø²ÙŠØ§Ø±Ø© Ø´Ù‡Ø±ÙŠØ© ÙŠØ­ØµÙ„ Ø¹Ù„ÙŠÙ‡Ø§ Ù…ÙˆÙ‚Ø¹ÙƒØŸ</div>
      <div class="question-hint">Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù…Ø§Ù‹ ØªÙ‚Ø±ÙŠØ¨ÙŠØ§Ù‹ Ø£Ùˆ Ø§Ø®ØªØ± Ù†Ø·Ø§Ù‚Ø§Ù‹ Ù…Ù† Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª</div>
      <div class="input-group">
        <input type="number" class="text-input" id="v-input" placeholder="Ù…Ø«Ø§Ù„: 2500" min="0" oninput="onNumericInput('v-input',12)">
        <div class="or-divider">â€” Ø£Ùˆ Ø§Ø®ØªØ± Ù†Ø·Ø§Ù‚Ø§Ù‹ â€”</div>
        <div class="options single-col" id="opts-12"></div>
      </div>
      <div class="error-msg" id="err-12">ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù‚ÙŠÙ…Ø© Ø£Ùˆ Ø§Ø®ØªÙŠØ§Ø± Ù†Ø·Ø§Ù‚</div>
      <div class="action-bar"><button class="btn-back" onclick="goBack()">Ø±Ø¬ÙˆØ¹</button><button class="btn-next" id="next-12" onclick="nextScreen()" disabled>Ø§Ù„ØªØ§Ù„ÙŠ â†’</button></div>
    </div>
    <!-- S13: CR (conditional) -->
    <div class="screen" id="screen-13">
      <div class="screen-number">Ø§Ù„Ø³Ø¤Ø§Ù„ 12 â€” Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„</div>
      <div class="question">Ù…Ø§ Ù†Ø³Ø¨Ø© Ø§Ù„ØªØ­ÙˆÙŠÙ„ ÙÙŠ Ù…ÙˆÙ‚Ø¹ÙƒØŸ</div>
      <div class="question-hint">Ù†Ø³Ø¨Ø© Ø§Ù„Ø²ÙˆØ§Ø± Ø§Ù„Ø°ÙŠÙ† ÙŠÙÙƒÙ…Ù„ÙˆÙ† Ø§Ù„Ù‡Ø¯Ù (Ø´Ø±Ø§Ø¡ØŒ ØªØ³Ø¬ÙŠÙ„ØŒ Ø§ØªØµØ§Ù„...)</div>
      <div class="input-group">
        <input type="number" class="text-input" id="cr-input" placeholder="Ù…Ø«Ø§Ù„: 1.5" min="0" max="100" step="0.1" oninput="onNumericInput('cr-input',13)">
        <div class="or-divider">â€” Ø£Ùˆ Ø§Ø®ØªØ± Ù†Ø·Ø§Ù‚Ø§Ù‹ â€”</div>
        <div class="options single-col" id="opts-13"></div>
      </div>
      <div class="error-msg" id="err-13">ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù‚ÙŠÙ…Ø© Ø£Ùˆ Ø§Ø®ØªÙŠØ§Ø± Ù†Ø·Ø§Ù‚</div>
      <div class="action-bar"><button class="btn-back" onclick="goBack()">Ø±Ø¬ÙˆØ¹</button><button class="btn-next" id="next-13" onclick="nextScreen()" disabled>Ø§Ù„ØªØ§Ù„ÙŠ â†’</button></div>
    </div>
    <!-- S14: timeline -->
    <div class="screen" id="screen-14">
      <div class="screen-number">Ø§Ù„Ø³Ø¤Ø§Ù„ 13 â€” Ø§Ù„ØªÙˆÙ‚ÙŠØª</div>
      <div class="question">Ù…ØªÙ‰ ØªØ±ÙŠØ¯ Ø±Ø¤ÙŠØ© Ø§Ù„Ù†ØªØ§Ø¦Ø¬ØŸ</div>
      <div class="options single-col" id="opts-14"></div>
      <div class="error-msg" id="err-14">ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø¥Ø¬Ø§Ø¨Ø© Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©</div>
      <div class="action-bar"><button class="btn-back" onclick="goBack()">Ø±Ø¬ÙˆØ¹</button><button class="btn-next" id="next-14" onclick="nextScreen()" disabled>Ø§Ù„ØªØ§Ù„ÙŠ â†’</button></div>
    </div>
    <!-- S15: has_app (conditional) -->
    <div class="screen" id="screen-15">
      <div class="screen-number">Ø§Ù„Ø³Ø¤Ø§Ù„ 14 â€” Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¬ÙˆØ§Ù„</div>
      <div class="question">Ù‡Ù„ Ù„Ø¯ÙŠÙƒ ØªØ·Ø¨ÙŠÙ‚ Ø¬ÙˆØ§Ù„ØŸ</div>
      <div class="options" id="opts-15"></div>
      <div class="error-msg" id="err-15">ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø¥Ø¬Ø§Ø¨Ø© Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©</div>
      <div class="action-bar"><button class="btn-back" onclick="goBack()">Ø±Ø¬ÙˆØ¹</button><button class="btn-next" id="next-15" onclick="completeUnit1()" disabled>Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„ØªØ´Ø®ÙŠØµ âœ“</button></div>
    </div>

    <!-- â•â•â•â• PROCESSING â€” UNIT 2 â•â•â•â• -->
    <div class="output-screen" id="screen-proc2">
      <div class="processing-screen">
        <span class="processing-icon" style="animation:spin 1.5s linear infinite">âš™ï¸</span>
        <div class="processing-title">ÙŠÙØ­Ø³Ø¨ Ø§Ù„ØªØ´Ø®ÙŠØµ...</div>
        <div class="processing-sub">Ù…Ø­Ø±Ùƒ Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ø­ØªÙ…ÙŠ â€” 10 Ø®Ø·ÙˆØ§Øª + 9 Ù‚ÙˆØ§Ø¹Ø¯ ØµØ§Ø±Ù…Ø©</div>
        <div class="processing-steps">
          <div class="proc-step active" id="pstep1">âŠ™ ØªØ·Ø¨ÙŠÙ‚ Ø¬Ø¯Ø§ÙˆÙ„ Ø§Ù„Ù‚Ø·Ø§Ø¹ ÙˆØ§Ù„ØªØ­Ø¯ÙŠ ÙˆØ§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©</div>
          <div class="proc-step" id="pstep2">âŠ™ ØªØ·Ø¨ÙŠÙ‚ Ù…Ø¹Ø¯Ù‘Ù„Ø§Øª Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª ÙˆØ§Ù„ØªØ­ÙˆÙŠÙ„ ÙˆØ§Ù„Ø£Ø¯ÙˆØ§Øª</div>
          <div class="proc-step" id="pstep3">âŠ™ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„ØµØ§Ø±Ù…Ø© Ø§Ù„ØªØ³Ø¹</div>
        </div>
      </div>
    </div>

    <!-- â•â•â•â• UNIT 2 RESULTS â•â•â•â• -->
    <div class="output-screen" id="screen-u2results"></div>

    <!-- â•â•â•â• PROCESSING â€” UNIT 3 â•â•â•â• -->
    <div class="output-screen" id="screen-proc3">
      <div class="processing-screen">
        <span class="processing-icon" style="animation:spin 1.5s linear infinite">ğŸ¤–</span>
        <div class="processing-title">ÙŠÙØ­Ø¯ÙÙ‘Ø¯ Ø£ÙØ¶Ù„ Ø®Ø¯Ù…Ø© Ù„ÙƒÙ„ ÙƒØªÙ„Ø©...</div>
        <div class="processing-sub">Ø·Ø¨Ù‚Ø© ØªØ£Ø³ÙŠØ³ÙŠØ© â† Ø£ÙˆÙ„ÙˆÙŠØ§Øª Ø§Ù„ØªØ¬Ø§ÙˆØ² â† Ù…ØµÙÙˆÙØ© Ø§Ù„ØªÙ†ÙÙŠØ°</div>
        <div class="ai-loading-bar"></div>
        <div class="processing-steps" style="margin-top:20px">
          <div class="proc-step active" id="u3step1">âŠ™ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø®Ø¯Ù…Ø© Ø§Ù„Ù…ÙØ¨Ø±Ø²Ø© Ù„ÙƒÙ„ ÙƒØªÙ„Ø©</div>
          <div class="proc-step" id="u3step2">âŠ™ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø·Ø¨Ù‚Ø© Ø§Ù„ØªØ£Ø³ÙŠØ³ÙŠØ© ÙˆØ§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¯Ø§Ø¹Ù…Ø©</div>
          <div class="proc-step" id="u3step3">âŠ™ ØªÙˆÙ„ÙŠØ¯ Ø¬Ù…Ù„ Ø§Ù„ØªØ¨Ø±ÙŠØ± Ø§Ù„Ù…ÙØ®ØµØµØ© (AI)</div>
        </div>
      </div>
    </div>

    <!-- â•â•â•â• UNIT 3 FINAL RESULTS â•â•â•â• -->
    <div class="output-screen" id="screen-u3results"></div>

  </div><!-- /card -->
</div><!-- /wrapper -->

<script>
'use strict';

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   UNIT 1 â€” QUESTION ENGINE
   Screen order note (spec Â§1.2 resolution):
   The spec table labels V(5) and CR(6) BEFORE has_website(9), but both
   are conditioned on has_website=true. This is a spec inconsistency.
   Resolution: has_website is displayed at position 11 (before V and CR),
   which is logically required. The spec label numbers are reference IDs,
   not display positions. The spec note V1-5 confirms: "if has_website=false
   â†’ skip screens 5 and 6" â€” meaning has_website must be known first.
   Timeline (label 8) is placed after the website-data cluster (11,12,13)
   and before has_app(10) for better UX flow.
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const SCREENS_CONFIG = [
  { id:0,  varName:'sector', condition:()=>true,
    options:[{v:'retail',l:'ğŸ›ï¸ ØªØ¬Ø²Ø¦Ø©'},{v:'ecommerce',l:'ğŸ›’ ØªØ¬Ø§Ø±Ø© Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©'},{v:'b2b',l:'ğŸ¤ B2B / Ø®Ø¯Ù…Ø§Øª Ù…Ø¤Ø³Ø³ÙŠØ©'},{v:'health',l:'ğŸ¥ ØµØ­Ø© ÙˆØ·Ø¨'},{v:'education',l:'ğŸ“š ØªØ¹Ù„ÙŠÙ…'},{v:'fnb',l:'ğŸ½ï¸ Ù…Ø·Ø§Ø¹Ù… ÙˆØ£ØºØ°ÙŠØ©'},{v:'manufacturing',l:'ğŸ­ ØªØµÙ†ÙŠØ¹'},{v:'realestate',l:'ğŸ¢ Ø¹Ù‚Ø§Ø±Ø§Øª'},{v:'professional',l:'ğŸ’¼ Ø®Ø¯Ù…Ø§Øª Ù…Ù‡Ù†ÙŠØ©'},{v:'other',l:'ğŸ“¦ Ø£Ø®Ø±Ù‰'}]
  },
  { id:1,  varName:'geo_focus', condition:()=>true,
    options:[{v:'local',l:'ğŸ“ Ù…Ø­Ù„ÙŠ â€” Ù…Ø¯ÙŠÙ†Ø© Ø£Ùˆ Ù…Ù†Ø·Ù‚Ø©'},{v:'national',l:'ğŸ—ºï¸ ÙˆØ·Ù†ÙŠ â€” Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…Ù…Ù„ÙƒØ©'},{v:'regional',l:'ğŸŒ Ø¥Ù‚Ù„ÙŠÙ…ÙŠ â€” Ø§Ù„Ø®Ù„ÙŠØ¬ ÙˆØ§Ù„Ø¹Ø§Ù„Ù… Ø§Ù„Ø¹Ø±Ø¨ÙŠ'},{v:'international',l:'ğŸŒ Ø¯ÙˆÙ„ÙŠ â€” Ø®Ø§Ø±Ø¬ Ø§Ù„Ù…Ù†Ø·Ù‚Ø©'}]
  },
  { id:2,  varName:'type', condition:()=>true, single:true,
    options:[{v:'startup',l:'ğŸš€ Ù†Ø§Ø´Ø¦Ø© â€” ÙÙŠ Ø§Ù„Ù…Ø±Ø§Ø­Ù„ Ø§Ù„ØªØ£Ø³ÙŠØ³ÙŠØ© Ø§Ù„Ø£ÙˆÙ„Ù‰'},{v:'smb',l:'ğŸª ØµØºÙŠØ±Ø© ÙˆÙ…ØªÙˆØ³Ø·Ø© â€” Ø¹Ù…Ù„ Ù‚Ø§Ø¦Ù… ÙŠÙ†Ù…Ùˆ'},{v:'enterprise',l:'ğŸ›ï¸ ÙƒØ¨Ø±Ù‰ â€” Ù…Ø¤Ø³Ø³Ø© Ø±Ø§Ø³Ø®Ø© ÙÙŠ Ø§Ù„Ø³ÙˆÙ‚'}]
  },
  { id:3,  varName:'product_stage', condition:()=>S.variables.type==='startup', single:true,
    options:[{v:'idea',l:'ğŸ’¡ ÙÙƒØ±Ø© â€” Ù„Ù… Ù†Ø¨Ø¯Ø£ Ø§Ù„ØªÙ†ÙÙŠØ° Ø¨Ø¹Ø¯'},{v:'pre_launch',l:'ğŸ”§ Ù…Ø§ Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ø·Ù„Ø§Ù‚ â€” ÙÙŠ Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø¨Ù†Ø§Ø¡'},{v:'launched_no_revenue',l:'ğŸŸ¡ Ø£ÙØ·Ù„Ù‚Ù†Ø§ â€” Ù„ÙƒÙ† Ø¨Ø¯ÙˆÙ† Ø¥ÙŠØ±Ø§Ø¯ Ø¨Ø¹Ø¯'},{v:'launched_with_revenue',l:'ğŸŸ¢ Ø£ÙØ·Ù„Ù‚Ù†Ø§ â€” ÙˆÙ„Ø¯ÙŠÙ†Ø§ Ø¥ÙŠØ±Ø§Ø¯ Ù‚Ø§Ø¦Ù…'}]
  },
  { id:4,  varName:'challenge', condition:()=>true,
    options:[{v:'validation',l:'ğŸ”¬ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„ÙÙƒØ±Ø©'},{v:'roadmap',l:'ğŸ—ºï¸ ØºÙŠØ§Ø¨ Ø®Ø§Ø±Ø·Ø© Ø§Ù„Ø·Ø±ÙŠÙ‚'},{v:'bizplan',l:'ğŸ“‹ Ø¨Ù†Ø§Ø¡ Ø®Ø·Ø© Ø§Ù„Ø¹Ù…Ù„'},{v:'awareness',l:'ğŸ“¢ Ù‚Ù„Ø© Ø§Ù„ÙˆØ¹ÙŠ Ø¨Ø§Ù„Ø¹Ù„Ø§Ù…Ø©'},{v:'conversion',l:'ğŸ’¸ Ø¶Ø¹Ù Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„'},{v:'retention',l:'ğŸ” Ø§Ù„Ø§Ø­ØªÙØ§Ø¸ Ø¨Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡'},{v:'growth',l:'ğŸ“ˆ ØªØ³Ø±ÙŠØ¹ Ø§Ù„Ù†Ù…Ùˆ'},{v:'cac',l:'ğŸ’° ØªÙƒÙ„ÙØ© Ø§ÙƒØªØ³Ø§Ø¨ Ù…Ø±ØªÙØ¹Ø©'},{v:'system',l:'âš™ï¸ ØºÙŠØ§Ø¨ Ø§Ù„Ù†Ø¸Ø§Ù… ÙˆØ§Ù„Ø£ØªÙ…ØªØ©'}]
  },
  { id:5,  varName:'budget', condition:()=>true, single:true,
    options:[{v:'small',l:'ğŸ’³ Ø£Ù‚Ù„ Ù…Ù† 5,000 Ø±ÙŠØ§Ù„',raw:2500},{v:'medium',l:'ğŸ’° 5,000 â€” 15,000 Ø±ÙŠØ§Ù„',raw:10000},{v:'medium_large',l:'ğŸ’ 15,000 â€” 50,000 Ø±ÙŠØ§Ù„',raw:32500},{v:'large',l:'ğŸ¦ Ø£ÙƒØ«Ø± Ù…Ù† 50,000 Ø±ÙŠØ§Ù„',raw:75000}]
  },
  { id:6,  varName:'budget_period', condition:()=>true,
    options:[{v:'monthly',l:'ğŸ“… Ø´Ù‡Ø±ÙŠØ©'},{v:'annual',l:'ğŸ“† Ø³Ù†ÙˆÙŠØ© (Ø³Ø£Ø­ÙˆÙ‘Ù„Ù‡Ø§ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ù„Ø´Ù‡Ø±ÙŠØ©)'}]
  },
  { id:7,  varName:'marketing_history', condition:()=>true, single:true,
    options:[{v:'new',l:'ğŸ†• Ø¬Ø¯ÙŠØ¯ â€” Ù„Ù… Ø£Ø¬Ø±Ù‘Ø¨ Ø§Ù„ØªØ³ÙˆÙŠÙ‚ Ø§Ù„Ø±Ù‚Ù…ÙŠ Ø¨Ø¹Ø¯'},{v:'tried_failed',l:'âš ï¸ Ø¬Ø±Ù‘Ø¨Øª â€” Ù„ÙƒÙ† Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ù„Ù… ØªÙƒÙ† Ù…ÙØ±Ø¶ÙŠØ©'},{v:'scaling',l:'ğŸš€ Ø£ÙÙˆØ³Ù‘Ø¹ â€” Ø£Ø±ÙŠØ¯ ØªÙƒØ«ÙŠÙ Ù…Ø§ ÙŠØ¹Ù…Ù„ Ø¨Ø§Ù„ÙØ¹Ù„'}]
  },
  { id:8,  varName:'execution_capacity', condition:()=>true, single:true,
    options:[{v:'solo',l:'ğŸ‘¤ Ø³Ø£Ù†ÙÙ‘Ø° Ø¨Ù†ÙØ³ÙŠ'},{v:'small_team',l:'ğŸ‘¥ ÙØ±ÙŠÙ‚ ØµØºÙŠØ± Ø¯Ø§Ø®Ù„ÙŠ (1-5 Ø£Ø´Ø®Ø§Øµ)'},{v:'dedicated_team',l:'ğŸ¢ ÙØ±ÙŠÙ‚ Ù…ØªØ®ØµØµ Ø¯Ø§Ø®Ù„ÙŠ'},{v:'agency_external',l:'ğŸ¤ ÙˆÙƒØ§Ù„Ø© Ø®Ø§Ø±Ø¬ÙŠØ© Ø£Ùˆ Ù…Ø³ØªÙ‚Ù„ÙˆÙ†'}]
  },
  { id:9,  varName:'current_tools', condition:()=>true, single:true,
    options:[{v:'none',l:'âŒ Ù„Ø§ Ø£Ø¯ÙˆØ§Øª â€” Ù†Ø¨Ø¯Ø£ Ù…Ù† Ø§Ù„ØµÙØ±'},{v:'basic',l:'ğŸ”° Ø£Ø³Ø§Ø³ÙŠØ© â€” Ø¨Ø±ÙŠØ¯ ÙˆØ³ÙˆØ´ÙŠØ§Ù„ ÙÙ‚Ø·'},{v:'intermediate',l:'âš¡ Ù…ØªÙˆØ³Ø·Ø© â€” CRM Ø£Ùˆ Analytics'},{v:'advanced',l:'ğŸš€ Ù…ØªÙ‚Ø¯Ù…Ø© â€” Ù…Ù†Ø¸ÙˆÙ…Ø© Ø±Ù‚Ù…ÙŠØ© Ù…ØªÙƒØ§Ù…Ù„Ø©'}]
  },
  { id:10, varName:'main_channel', condition:()=>true,
    options:[{v:'website',l:'ğŸŒ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ'},{v:'social',l:'ğŸ“± Ø§Ù„Ø³ÙˆØ´ÙŠØ§Ù„ Ù…ÙŠØ¯ÙŠØ§'},{v:'ads',l:'ğŸ“£ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø©'},{v:'referral',l:'ğŸ—£ï¸ Ø§Ù„ØªÙˆØµÙŠØ§Øª ÙˆØ§Ù„Ø¥Ø­Ø§Ù„Ø©'},{v:'none',l:'â“ Ù„Ø§ ØªÙˆØ¬Ø¯ Ù‚Ù†Ø§Ø© ÙˆØ§Ø¶Ø­Ø© Ø¨Ø¹Ø¯'}]
  },
  { id:11, varName:'has_website', condition:()=>true,
    options:[{v:'true',l:'âœ… Ù†Ø¹Ù…ØŒ Ù„Ø¯ÙŠÙ‘ Ù…ÙˆÙ‚Ø¹ Ø¬Ø§Ù‡Ø²'},{v:'false',l:'âŒ Ù„Ø§ØŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…ÙˆÙ‚Ø¹ Ø¨Ø¹Ø¯'}]
  },
  { id:12, varName:'V', condition:()=>S.variables.has_website===true, isNumeric:true,
    options:[{v:0,l:'â­• ØµÙØ± â€” Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¬Ø¯ÙŠØ¯ Ø¬Ø¯Ø§Ù‹'},{v:250,l:'ğŸ“‰ Ø£Ù‚Ù„ Ù…Ù† 500 Ø²ÙŠØ§Ø±Ø© / Ø´Ù‡Ø±'},{v:2500,l:'ğŸ“Š 500 â€” 5,000 Ø²ÙŠØ§Ø±Ø© / Ø´Ù‡Ø±'},{v:7500,l:'ğŸ“ˆ Ø£ÙƒØ«Ø± Ù…Ù† 5,000 Ø²ÙŠØ§Ø±Ø© / Ø´Ù‡Ø±'},{v:null,l:'â“ Ù„Ø§ Ø£Ø¹Ø±Ù'}]
  },
  { id:13, varName:'CR', condition:()=>S.variables.has_website===true, isNumeric:true,
    options:[{v:0.5,l:'ğŸ“‰ Ø£Ù‚Ù„ Ù…Ù† 1%'},{v:2,l:'ğŸ“Š Ù…Ù† 1% Ø¥Ù„Ù‰ 3%'},{v:4,l:'ğŸ“ˆ Ø£ÙƒØ«Ø± Ù…Ù† 3%'},{v:null,l:'â“ Ù„Ø§ Ø£Ø¹Ø±Ù'}]
  },
  { id:14, varName:'timeline', condition:()=>true, single:true,
    options:[{v:'fast',l:'âš¡ Ø³Ø±ÙŠØ¹ â€” Ø£Ø±ÙŠØ¯ Ù†ØªØ§Ø¦Ø¬ Ø®Ù„Ø§Ù„ 60 ÙŠÙˆÙ…Ø§Ù‹'},{v:'sustained',l:'ğŸŒ± Ù…Ø³ØªØ¯Ø§Ù… â€” Ø¨Ù†Ø§Ø¡ Ø·ÙˆÙŠÙ„ Ø§Ù„Ø£Ù…Ø¯ (6 Ø£Ø´Ù‡Ø±+)'}]
  },
  { id:15, varName:'has_app', condition:()=>{ const s=S.variables.sector; return s!=='fnb'&&s!=='realestate'; },
    options:[{v:'true',l:'âœ… Ù†Ø¹Ù…ØŒ Ù„Ø¯ÙŠÙ‘ ØªØ·Ø¨ÙŠÙ‚ Ø¬ÙˆØ§Ù„'},{v:'false',l:'âŒ Ù„Ø§ØŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØªØ·Ø¨ÙŠÙ‚'}]
  }
];

/* â”€â”€ State â”€â”€ */
const S = {
  sessionId: uuid(),
  currentIndex: -1,
  history: [],
  retryCount: {},
  variables: {
    sector:null,geo_focus:null,type:null,product_stage:null,
    challenge:null,budget:null,budget_raw:null,budget_period:null,
    marketing_history:null,execution_capacity:null,current_tools:null,
    main_channel:null,V:null,CR:null,timeline:null,has_website:null,has_app:null
  }
};

function uuid(){ return 'xxxx-4xxx-yxxx'.replace(/[xy]/g,(c)=>{ const r=Math.random()*16|0; return (c==='x'?r:r&0x3|0x8).toString(16); }); }

function init(){
  document.getElementById('sessionId').textContent = 'Ø¬Ù„Ø³Ø©: ' + S.sessionId.slice(0,8);
  SCREENS_CONFIG.forEach(sc=>{
    const el=document.getElementById('opts-'+sc.id); if(!el)return;
    if(sc.single) el.classList.add('single-col');
    sc.options.forEach(opt=>{
      const btn=document.createElement('button');
      btn.className='option-btn'; btn.textContent=opt.l;
      btn.dataset.value = opt.v===null?'__null__':String(opt.v);
      btn.onclick=()=>selectOption(btn,sc.id);
      el.appendChild(btn);
    });
  });
  buildDots();
}

function active(){ return SCREENS_CONFIG.filter(sc=>sc.condition()); }

function startSession(){
  document.getElementById('progressArea').style.display='block';
  showAt(0);
}

function showAt(idx){
  document.querySelectorAll('.screen,.output-screen').forEach(s=>s.classList.remove('active'));
  S.currentIndex=idx;
  const sc=active()[idx];
  document.getElementById('screen-'+sc.id).classList.add('active');
  document.getElementById('err-'+sc.id)?.classList.remove('visible');
  const nb=document.getElementById('next-'+sc.id);
  if(nb) nb.disabled = S.variables[sc.varName]===null;
  restoreSel(sc); updateProgress(idx);
}

function restoreSel(sc){
  const val=S.variables[sc.varName];
  const c=document.getElementById('opts-'+sc.id); if(!c)return;
  c.querySelectorAll('.option-btn').forEach(b=>{
    b.classList.remove('selected');
    const sv=val===null?'__null__':String(val);
    if(b.dataset.value===sv) b.classList.add('selected');
  });
  if(sc.id===12){const i=document.getElementById('v-input'); if(i&&typeof val==='number')i.value=val;}
  if(sc.id===13){const i=document.getElementById('cr-input'); if(i&&typeof val==='number')i.value=val;}
}

function selectOption(btn,screenId){
  const sc=SCREENS_CONFIG.find(s=>s.id===screenId);
  const c=document.getElementById('opts-'+screenId);
  c.querySelectorAll('.option-btn').forEach(b=>b.classList.remove('selected'));
  btn.classList.add('selected');
  if(screenId===12) document.getElementById('v-input').value='';
  if(screenId===13) document.getElementById('cr-input').value='';
  applyVar(sc, btn.dataset.value==='__null__'?null:btn.dataset.value);
  const nb=document.getElementById('next-'+screenId); if(nb)nb.disabled=false;
}

function onNumericInput(inputId,screenId){
  const inp=document.getElementById(inputId);
  const sc=SCREENS_CONFIG.find(s=>s.id===screenId);
  const c=document.getElementById('opts-'+screenId);
  if(inp.value!==''){
    c.querySelectorAll('.option-btn').forEach(b=>b.classList.remove('selected'));
    applyVar(sc,parseFloat(inp.value));
    document.getElementById('next-'+screenId).disabled=false;
  } else {
    if(!c.querySelector('.option-btn.selected')){
      document.getElementById('next-'+screenId).disabled=true;
      S.variables[sc.varName]=null;
    }
  }
}

function applyVar(sc,raw){
  const k=sc.varName;
  if(raw===null){S.variables[k]=null;return;}
  if(k==='has_website'||k==='has_app'){S.variables[k]=raw==='true'||raw===true;return;}
  if(k==='V'||k==='CR'){S.variables[k]=Number(raw);return;}
  if(k==='budget'){
    S.variables.budget=raw;
    const opt=sc.options.find(o=>String(o.v)===String(raw));
    if(opt)S.variables.budget_raw=opt.raw;
    return;
  }
  S.variables[k]=raw;
}

function nextScreen(){
  const all=active(); const sc=all[S.currentIndex];
  if(S.variables[sc.varName]===null&&!sc.isNumeric){
    S.retryCount[sc.id]=(S.retryCount[sc.id]||0)+1;
    if(S.retryCount[sc.id]<=2) document.getElementById('err-'+sc.id)?.classList.add('visible');
    return;
  }
  const nextAll=active(); const nextIdx=S.currentIndex+1;
  if(nextIdx>=nextAll.length){completeUnit1();return;}
  S.history.push(S.currentIndex);
  showAt(nextIdx);
}

function goBack(){
  if(!S.history.length)return;
  const prev=S.history.pop(); S.currentIndex=prev; showAt(prev);
}

function completeUnit1(){
  // V1-1: normalise annual budget
  if(S.variables.budget_period==='annual'&&S.variables.budget_raw!==null){
    S.variables.budget_raw=Math.round(S.variables.budget_raw/12);
    const r=S.variables.budget_raw;
    S.variables.budget=r<5000?'small':r<15000?'medium':r<50000?'medium_large':'large';
  }
  showProcessing2();
}

function updateProgress(idx){
  const total=active().length; const pct=Math.round((idx/total)*100);
  document.getElementById('progressFill').style.width=pct+'%';
  document.getElementById('progressLabel').textContent=`Ø§Ù„Ø³Ø¤Ø§Ù„ ${idx+1} Ù…Ù† ${total}`;
  document.getElementById('progressPercent').textContent=pct+'%';
  document.querySelectorAll('.step-dot').forEach((d,i)=>{
    d.className='step-dot';
    if(i<idx)d.classList.add('done'); else if(i===idx)d.classList.add('current');
  });
}
function buildDots(){
  const c=document.getElementById('stepDots'); c.innerHTML='';
  for(let i=0;i<16;i++){const d=document.createElement('div');d.className='step-dot';c.appendChild(d);}
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   UNIT 2 â€” SCORING ENGINE (Deterministic)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const T={
  sector:{
    retail:       {ADV:3,VID:2,EML:2,BRD:3,AI:2,INF:4,STR:1,SOC:3},
    ecommerce:    {ADV:4,VID:2,EML:4,BRD:2,AI:3,INF:4,STR:1,SOC:2},
    b2b:          {ADV:2,VID:3,EML:3,BRD:2,AI:4,INF:0,STR:4,SOC:1},
    health:       {ADV:2,VID:4,EML:3,BRD:5,AI:3,INF:3,STR:2,SOC:3},
    education:    {ADV:3,VID:5,EML:4,BRD:3,AI:3,INF:2,STR:2,SOC:5},
    fnb:          {ADV:3,VID:4,EML:2,BRD:4,AI:2,INF:5,STR:1,SOC:5},
    manufacturing:{ADV:1,VID:2,EML:2,BRD:2,AI:5,INF:0,STR:4,SOC:1},
    realestate:   {ADV:3,VID:3,EML:2,BRD:5,AI:2,INF:2,STR:3,SOC:3},
    professional: {ADV:2,VID:3,EML:3,BRD:5,AI:3,INF:0,STR:4,SOC:2},
    other:        {ADV:2,VID:2,EML:2,BRD:2,AI:2,INF:1,STR:3,SOC:2}
  },
  challenge:{
    validation:{ADV:0,VID:1,EML:0,BRD:3,AI:0,INF:0,STR:5,SOC:1},
    roadmap:   {ADV:1,VID:2,EML:1,BRD:2,AI:1,INF:1,STR:5,SOC:1},
    bizplan:   {ADV:0,VID:1,EML:0,BRD:3,AI:0,INF:0,STR:5,SOC:1},
    awareness: {ADV:5,VID:4,EML:1,BRD:3,AI:1,INF:4,STR:1,SOC:4},
    conversion:{ADV:2,VID:1,EML:2,BRD:1,AI:2,INF:2,STR:1,SOC:1},
    retention: {ADV:1,VID:2,EML:5,BRD:1,AI:3,INF:1,STR:1,SOC:2},
    growth:    {ADV:4,VID:3,EML:2,BRD:2,AI:2,INF:4,STR:2,SOC:3},
    cac:       {ADV:3,VID:1,EML:2,BRD:0,AI:4,INF:0,STR:2,SOC:1},
    system:    {ADV:1,VID:1,EML:3,BRD:1,AI:5,INF:0,STR:3,SOC:1}
  },
  type:{
    startup:   {ADV:1,VID:3,EML:1,BRD:5,AI:0,INF:0,STR:5,SOC:3},
    smb:       {ADV:3,VID:3,EML:3,BRD:2,AI:2,INF:3,STR:2,SOC:3},
    enterprise:{ADV:4,VID:2,EML:4,BRD:1,AI:5,INF:4,STR:3,SOC:2}
  },
  budget:{
    small:       {ADV:1,VID:4,EML:3,BRD:3,AI:0,INF:1,STR:4,SOC:4},
    medium:      {ADV:3,VID:3,EML:3,BRD:3,AI:1,INF:3,STR:2,SOC:3},
    medium_large:{ADV:4,VID:2,EML:3,BRD:3,AI:2,INF:4,STR:3,SOC:2},
    large:       {ADV:4,VID:2,EML:3,BRD:3,AI:5,INF:4,STR:3,SOC:2}
  },
  channel:{
    website: {ADV:2,VID:1,EML:3,BRD:1,AI:3,INF:0,STR:1,SOC:1},
    social:  {ADV:2,VID:5,EML:1,BRD:3,AI:1,INF:4,STR:1,SOC:5},
    ads:     {ADV:5,VID:1,EML:2,BRD:0,AI:2,INF:1,STR:1,SOC:1},
    referral:{ADV:1,VID:3,EML:4,BRD:5,AI:1,INF:3,STR:1,SOC:3},
    none:    {ADV:3,VID:3,EML:1,BRD:4,AI:2,INF:2,STR:5,SOC:3}
  },
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // V_MODIFIER â€” spec Â§2.3 (pseudocode referenced; values aligned with
  // the authoritative reference implementation in Document 2).
  //
  // DESIGN DECISION â€” zero bucket is intentionally EMPTY:
  //   The explicit R8 rule fires separately: V=0 && CR=null â†’ STR+3.
  //   If we also put STR:2 here, V=0 sites would get +5 on STR instead
  //   of the spec's intended +3 (double-count). The zero bucket must
  //   remain empty so R8 is the sole handler for this case.
  //
  //   low    â†’ traffic exists but is thin â†’ grow organic channels first
  //   medium â†’ traffic justifies paid ads; email list building viable
  //   high   â†’ marginal ads boost only; at scale other levers matter more
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  vMod:{
    zero:   {},                          // R8 explicit rule handles V=0+CR=null â€” do NOT score here
    low:    {ADV:1, SOC:1, STR:2},      // thin traffic â†’ organic social + strategy
    medium: {ADV:2},                     // decent traffic â†’ paid ads become cost-effective
    high:   {ADV:1},                     // high traffic â†’ marginal paid boost only
  },
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // CR_MODIFIER â€” spec Â§2.3
  //
  // DESIGN DECISION â€” low/medium CR targets the CRO block (always fixed):
  //   {CRO:3} and {CRO:1} are intentionally directed at CRO. Since CRO
  //   is a fixed block (R7, always shown), it never enters the selective
  //   ranking pool, and the add() function silently ignores keys not in
  //   the scores object. This is not a bug â€” the effect is that low CR
  //   reinforces the fixed inclusion of CRO without distorting selective
  //   block ranking. CRO is already there; no extra boost is needed.
  //
  //   high CR â†’ site converts well â†’ safe to scale paid ads + email
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  crMod:{
    low:    {CRO:3},                     // CRO fixed â†’ add() ignores gracefully; intentional
    medium: {CRO:1},                     // same reasoning
    high:   {ADV:1, EML:1},             // converting well â†’ pour fuel on acquisition + retention
  },
  history:{
    new:         {ADV:0,VID:0,EML:0,BRD:1,AI:0,STR:2,ANL:0},
    tried_failed:{ADV:1,VID:1,EML:1,BRD:0,AI:1,STR:2,ANL:3},
    scaling:     {ADV:2,VID:1,EML:1,BRD:0,AI:2,STR:0,ANL:1}
  },
  productStage:{
    idea:                 {STR:3,BRD:2,VID:0,ADV:0,EML:0,AI:0,INF:0},
    pre_launch:           {STR:1,BRD:2,VID:1,ADV:0,EML:0,AI:0,INF:0},
    launched_no_revenue:  {STR:0,BRD:1,VID:1,ADV:1,EML:1,AI:0,INF:0},
    launched_with_revenue:{STR:0,BRD:0,VID:1,ADV:2,EML:1,AI:2,INF:0}
  },
  toolsANL:{ none:2, basic:1, intermediate:0, advanced:-1 },
  toolsAI:  { none:0, basic:1, intermediate:1, advanced:2 }
};

const BLOCK_META={
  SEO:{name:'ØªØ­Ø³ÙŠÙ† Ù…Ø­Ø±ÙƒØ§Øª Ø§Ù„Ø¨Ø­Ø«',     icon:'ğŸ”',range:'#1â€“#20',   type:'fixed'   },
  CRO:{name:'ØªØ­Ø³ÙŠÙ† Ø§Ù„ØªØ­ÙˆÙŠÙ„',           icon:'âš¡',range:'#47â€“#60', type:'fixed'   },
  ADV:{name:'Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø©',      icon:'ğŸ“£',range:'#33â€“#46', type:'selective'},
  VID:{name:'Ø§Ù„Ù…Ø­ØªÙˆÙ‰ ÙˆØ§Ù„ÙÙŠØ¯ÙŠÙˆ',        icon:'ğŸ¬',range:'#21â€“#32', type:'selective'},
  EML:{name:'Ø§Ù„Ø¹Ù„Ø§Ù‚Ø© ÙˆØ§Ù„Ø§Ø­ØªÙØ§Ø¸',       icon:'ğŸ“§',range:'#61â€“#69', type:'selective'},
  BRD:{name:'Ø§Ù„Ù‡ÙˆÙŠØ© ÙˆØ§Ù„Ø³Ù…Ø¹Ø©',          icon:'ğŸ¯',range:'#102â€“#110',type:'selective'},
  AI: {name:'Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ',        icon:'ğŸ¤–',range:'#121â€“#125',type:'selective'},
  INF:{name:'Ø§Ù„ØªØ³ÙˆÙŠÙ‚ Ø¨Ø§Ù„Ù…Ø¤Ø«Ø±ÙŠÙ†',       icon:'ğŸ‘¥',range:'#97â€“#101',type:'selective'},
  STR:{name:'Ø§Ù„Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© ÙˆØ§Ù„ØªØ®Ø·ÙŠØ·',  icon:'ğŸ—ºï¸',range:'#70â€“#76', type:'selective'},
  SOC:{name:'Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø³ÙˆØ´ÙŠØ§Ù„ Ù…ÙŠØ¯ÙŠØ§',   icon:'ğŸ“±',range:'#77â€“#88', type:'selective'},
  ECO:{name:'Ø§Ù„ØªØ¬Ø§Ø±Ø© Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©',    icon:'ğŸ›’',range:'#111â€“#120',type:'sector'  },
  ANL:{name:'Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ù„Ù‚ÙŠØ§Ø³',        icon:'ğŸ“Š',range:'#89â€“#96', type:'anchor'  }
};

function getVBucket(v){ return v===0?'zero':v<500?'low':v<=5000?'medium':'high'; }
function getCRBucket(c){ return c<1?'low':c<=3?'medium':'high'; }

function runUnit2(vars){
  const ALL=['ADV','VID','EML','BRD','AI','INF','STR','SOC','ANL'];
  const scores={}; const bk={};
  ALL.forEach(b=>{ scores[b]=0; bk[b]={sector:0,challenge:0,type:0,budget:0,channel:0,V_modifier:0,CR_modifier:0,history_modifier:0,product_stage_modifier:0,tools_modifier:0}; });

  function add(tbl,key){
    if(!tbl)return;
    Object.entries(tbl).forEach(([b,v])=>{ if(scores[b]!==undefined){scores[b]+=v; if(key)bk[b][key]=(bk[b][key]||0)+v;} });
  }

  add(T.sector[vars.sector],'sector');
  add(T.challenge[vars.challenge],'challenge');
  add(T.type[vars.type],'type');
  add(T.budget[vars.budget],'budget');
  add(T.channel[vars.main_channel],'channel');

  if(vars.V!==null&&vars.V!==undefined){
    add(T.vMod[getVBucket(vars.V)],'V_modifier');
    if(vars.V===0&&(vars.CR===null||vars.CR===undefined)){ scores.STR+=3; bk.STR.V_modifier+=3; }
  }
  if(vars.CR!==null&&vars.CR!==undefined) add(T.crMod[getCRBucket(vars.CR)],'CR_modifier');
  add(T.history[vars.marketing_history],'history_modifier');
  if(vars.type==='startup'&&vars.product_stage) add(T.productStage[vars.product_stage],'product_stage_modifier');

  const anlMod=T.toolsANL[vars.current_tools]??0;
  const aiMod =T.toolsAI[vars.current_tools]??0;
  scores.ANL+=anlMod; bk.ANL.tools_modifier+=anlMod;
  scores.AI +=aiMod;  bk.AI.tools_modifier +=aiMod;

  const excluded=[]; const warnings=[];

  if(vars.type==='startup'){
    excluded.push({block_id:'INF',score:scores.INF,reason:'R1: Ø§Ù„Ø´Ø±ÙƒØ§Øª Ø§Ù„Ù†Ø§Ø´Ø¦Ø© â€” Ø§Ù„Ù…Ø¤Ø«Ø±ÙˆÙ† ØºÙŠØ± Ù…Ù†Ø§Ø³Ø¨ÙŠÙ† Ù„Ù„Ù…Ø±Ø§Ø­Ù„ Ø§Ù„ØªØ£Ø³ÙŠØ³ÙŠØ©'});
    scores.INF=null;
  }
  if(vars.type==='startup'){
    const r2Lifted=vars.product_stage==='launched_with_revenue'&&['medium','medium_large','large'].includes(vars.budget);
    if(!r2Lifted&&scores.AI!==null){
      excluded.push({block_id:'AI',score:scores.AI,reason:vars.product_stage!=='launched_with_revenue'?'R2: Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ ÙŠØªØ·Ù„Ø¨ Ø¥ÙŠØ±Ø§Ø¯Ø§Ù‹ Ù‚Ø§Ø¦Ù…Ø§Ù‹ Ø£ÙˆÙ„Ø§Ù‹':'R2: Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø§Ù„ØµØºÙŠØ±Ø© Ù„Ø§ ØªÙƒÙÙŠ'});
      scores.AI=null;
    }
  }
  if(vars.budget==='small'&&scores.AI!==null){
    if(!excluded.find(e=>e.block_id==='AI')){
      excluded.push({block_id:'AI',score:scores.AI,reason:'R3: Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø§Ù„ØµØºÙŠØ±Ø© â€” Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ 8,000 Ø±ÙŠØ§Ù„'});
    }
    scores.AI=null;
  }
  if(vars.current_tools==='none'&&vars.budget==='large') warnings.push('Ù†Ù†ØµØ­ Ø¨Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø£Ø³Ø§Ø³ Ø§Ù„ØªÙ‚Ù†ÙŠ Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ù†ÙØ§Ù‚ Ø§Ù„ÙƒØ¨ÙŠØ±.');

  const sectorBlocks=vars.sector==='ecommerce'?['ECO']:[];
  const QUOTA={small:2,medium:3,medium_large:4,large:5};
  const quota=QUOTA[vars.budget]||3;
  const SELECTIVE=['ADV','VID','EML','BRD','AI','INF','STR','SOC'];
  const candidates=SELECTIVE.filter(b=>scores[b]!==null)
    .map(b=>({block_id:b,block_name:BLOCK_META[b].name,icon:BLOCK_META[b].icon,range:BLOCK_META[b].range,score:scores[b],breakdown:{...bk[b]}}))
    .sort((a,b_)=>b_.score-a.score);
  const below=candidates.filter(c=>c.score<8);
  below.forEach(c=>excluded.push({block_id:c.block_id,score:c.score,reason:`R4: Ø§Ù„Ù†Ù‚Ø§Ø· (${c.score}) Ø£Ù‚Ù„ Ù…Ù† Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ 8`}));
  const eligible=candidates.filter(c=>c.score>=8);
  const selective=eligible.slice(0,quota).map((b,i)=>({...b,rank:i+1}));
  const anlData={block_id:'ANL',block_name:BLOCK_META.ANL.name,icon:BLOCK_META.ANL.icon,range:BLOCK_META.ANL.range,score:scores.ANL,breakdown:{...bk.ANL}};

  return {
    session_id:S.sessionId,
    fixed_blocks:['SEO','CRO'],
    sector_blocks:sectorBlocks,
    selective_blocks:selective,
    excluded_blocks:excluded,
    anchor_block:anlData,
    blocks_to_show:quota,
    warnings,
    timeline:vars.timeline,
    // _u2scores: raw scores before hard rules â€” passed to CRM OUTPUT_B (spec Â§4.3)
    variables_passthrough:{...vars, _u2scores:{...scores}}
  };
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   UNIT 3 â€” SERVICE SELECTOR (Deterministic + API Justifications)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

/* â”€â”€ Services Database â”€â”€
   Fields: ar, en, p1 (price_from), p2 (price_to), dur, kpi, warranty
   Only services referenced in matrices. */
const SVC = {
  1:  {ar:'Ø¨Ø­Ø« Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…ÙØªØ§Ø­ÙŠØ© Ø§Ù„Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠ',    en:'Strategic Keyword Research',       p1:3500, p2:6000, dur:'3-5 Ø£ÙŠØ§Ù…',      kpi:'Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø¹Ø¶ÙˆÙŠØ© 80%+ Ø®Ù„Ø§Ù„ 6 Ø£Ø´Ù‡Ø±',              warranty:'Ø¥Ø¹Ø§Ø¯Ø© Ø¹Ù…Ù„ Ù…Ø¬Ø§Ù†ÙŠØ© Ø¥Ø°Ø§ Ù„Ù… ØªÙƒÙ† 70% Ù…Ù† Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªØ±ØªÙŠØ¨'},
  2:  {ar:'ØªØ¯Ù‚ÙŠÙ‚ ØªÙ‚Ù†ÙŠ Ù„ØªØ­Ø³ÙŠÙ† Ù…Ø­Ø±ÙƒØ§Øª Ø§Ù„Ø¨Ø­Ø«',        en:'Technical SEO Audit',               p1:5000, p2:9000, dur:'5-7 Ø£ÙŠØ§Ù…',      kpi:'ØªØ­Ø³ÙŠÙ† Core Web Vitals Ø¥Ù„Ù‰ 90+',                         warranty:'Ø§Ø³ØªØ±Ø¯Ø§Ø¯ 50% Ø¥Ø°Ø§ Ù„Ù… Ù†ÙƒØªØ´Ù 20+ Ù…Ø´ÙƒÙ„Ø© Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ø¥ØµÙ„Ø§Ø­'},
  3:  {ar:'ØªØ­Ø³ÙŠÙ† Ù…Ù„Ù Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ Ø¹Ù„Ù‰ Ø¬ÙˆØ¬Ù„',            en:'GBP Optimization',                  p1:2000, p2:3500, dur:'2-3 Ø£ÙŠØ§Ù…',      kpi:'Ø§Ù„Ø¸Ù‡ÙˆØ± ÙÙŠ Ø£ÙˆÙ„ 3 Ù†ØªØ§Ø¦Ø¬ Ù…Ø­Ù„ÙŠØ© Ù„Ù€5 ÙƒÙ„Ù…Ø§Øª',               warranty:'Ø¶Ù…Ø§Ù† Ø¸Ù‡ÙˆØ± ÙÙŠ Local Pack Ø®Ù„Ø§Ù„ 45 ÙŠÙˆÙ… Ø£Ùˆ Ø§Ø³ØªØ±Ø¯Ø§Ø¯ 30%'},
  6:  {ar:'ÙƒØªØ§Ø¨Ø© Ù…Ù‚Ø§Ù„Ø§Øª Ù…Ø­Ø³Ù‘Ù†Ø© Ù„Ù…Ø­Ø±ÙƒØ§Øª Ø§Ù„Ø¨Ø­Ø«',     en:'SEO Blog Posts',                    p1:4000, p2:10000,dur:'1-2 Ø£Ø³Ø¨ÙˆØ¹',    kpi:'Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø¹Ø¶ÙˆÙŠØ© 50-120% Ø®Ù„Ø§Ù„ 90 ÙŠÙˆÙ…',           warranty:'Ø¥Ø¹Ø§Ø¯Ø© ÙƒØªØ§Ø¨Ø© Ù…Ø¬Ø§Ù†ÙŠØ© Ø¥Ø°Ø§ Ù„Ù… ØªØ­Ù‚Ù‚ 50% Ù†Ù…Ùˆ Ø®Ù„Ø§Ù„ 120 ÙŠÙˆÙ…'},
  9:  {ar:'ÙƒØªØ§Ø¨Ø© Ù†ØµÙˆØµ ØµÙØ­Ø§Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹',               en:'Website Copywriting',               p1:4500, p2:9000, dur:'5-10 Ø£ÙŠØ§Ù…',     kpi:'Ø²ÙŠØ§Ø¯Ø© Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø¨Ù€30-60%',                          warranty:'Ø¥Ø¹Ø§Ø¯Ø© ÙƒØªØ§Ø¨Ø© Ù…Ø¬Ø§Ù†ÙŠØ© Ø¥Ø°Ø§ Ù„Ù… ÙŠØªØ­Ø³Ù† Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø¨Ù€20%+'},
  16: {ar:'Ø¥Ø¹Ø¯Ø§Ø¯ ÙˆØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø³ÙŠÙˆ Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ',            en:'On-Page SEO Setup',                 p1:7000, p2:16000,dur:'2-4 Ø£Ø³Ø§Ø¨ÙŠØ¹',   kpi:'ØªØ­Ø³ÙŠÙ† Ù…ØªÙˆØ³Ø· ØªØ±ØªÙŠØ¨ Ø§Ù„ØµÙØ­Ø§Øª Ø¨Ù€10-25 Ù…ÙˆÙ‚Ø¹',             warranty:'Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ø³ÙŠÙ† Ù…Ø¬Ø§Ù†ÙŠØ© Ø¨Ø¹Ø¯ 3 Ø£Ø´Ù‡Ø±'},
  17: {ar:'Ø®Ø¯Ù…Ø© Ø§Ù„ØªØ¯ÙˆÙŠÙ† Ø§Ù„Ø´Ù‡Ø±ÙŠØ©',                  en:'Monthly Blogging',                  p1:6000, p2:14000,dur:'Ù…Ø³ØªÙ…Ø±',         kpi:'Ù†Ù…Ùˆ Ù…Ø³ØªÙ…Ø± 15-25% Ø´Ù‡Ø±ÙŠØ§Ù‹ ÙÙŠ Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª',                 warranty:'Ø¶Ù…Ø§Ù† Ù†Ù…Ùˆ 50%+ Ø®Ù„Ø§Ù„ 6 Ø£Ø´Ù‡Ø± Ø£Ùˆ Ø´Ù‡Ø± Ù…Ø¬Ø§Ù†ÙŠ'},
  19: {ar:'Ø®Ø±ÙŠØ·Ø© Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…ÙØªØ§Ø­ÙŠØ© Ø§Ù„Ø´Ø§Ù…Ù„Ø©',       en:'Master Keyword Map',                p1:3000, p2:7000, dur:'5-7 Ø£ÙŠØ§Ù…',      kpi:'500-1,000+ ÙƒÙ„Ù…Ø© Ù…ØµÙ†Ù‘ÙØ© | 20+ ÙØ±ØµØ© ÙÙˆØ±ÙŠØ©',             warranty:'ØªØ­Ø¯ÙŠØ« Ù…Ø¬Ø§Ù†ÙŠ Ø¨Ø¹Ø¯ 6 Ø£Ø´Ù‡Ø±'},
  22: {ar:'Ø¥Ù†ØªØ§Ø¬ ÙÙŠØ¯ÙŠÙˆ Ø¥Ø¹Ù„Ø§Ù†ÙŠ Ù‚ØµÙŠØ±',               en:'Short Ad Video',                    p1:3000, p2:7000, dur:'3-7 Ø£ÙŠØ§Ù…',      kpi:'ØªØ­Ù‚ÙŠÙ‚ CTR 2%+ | ØªÙ‚Ù„ÙŠÙ„ ØªÙƒÙ„ÙØ© Ø§Ù„Ù†Ù‚Ø±Ø© Ø¨Ù€30-50%',         warranty:'Ø¥Ø¹Ø§Ø¯Ø© Ù…ÙˆÙ†ØªØ§Ø¬ Ù…Ø¬Ø§Ù†ÙŠØ© Ø¥Ø°Ø§ Ù„Ù… ÙŠØ­Ù‚Ù‚ 1.5% CTR'},
  26: {ar:'Ù…Ø­ØªÙˆÙ‰ ÙÙŠØ¯ÙŠÙˆ Ù„Ù„Ø³ÙˆØ´ÙŠØ§Ù„ Ù…ÙŠØ¯ÙŠØ§',            en:'Social Video Content',              p1:4000, p2:10000,dur:'Ù…Ø³ØªÙ…Ø±',         kpi:'ØªØ­Ù‚ÙŠÙ‚ 1M+ Ù…Ø´Ø§Ù‡Ø¯Ø§Øª Ø´Ù‡Ø±ÙŠØ§Ù‹ | Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ù…ØªØ§Ø¨Ø¹ÙŠÙ† 50-150%',  warranty:'Ø¶Ù…Ø§Ù† ØªØ­Ù‚ÙŠÙ‚ 500K Ù…Ø´Ø§Ù‡Ø¯Ø© Ø®Ù„Ø§Ù„ 90 ÙŠÙˆÙ…'},
  27: {ar:'ÙÙŠØ¯ÙŠÙˆ Ù‚ØµØ© Ø§Ù„Ø¹Ù„Ø§Ù…Ø© Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ©',            en:'Brand Story Video',                 p1:12000,p2:28000,dur:'2-4 Ø£Ø³Ø§Ø¨ÙŠØ¹',   kpi:'Ø²ÙŠØ§Ø¯Ø© Brand Recall Ø¨Ù€80-120%',                         warranty:'Ø¶Ù…Ø§Ù† Ø±Ø¶Ø§ ÙƒØ§Ù…Ù„ Ø£Ùˆ Ø¥Ø¹Ø§Ø¯Ø© Ø¥Ù†ØªØ§Ø¬'},
  31: {ar:'ØªØ­Ø±ÙŠØ± ÙˆÙ…ÙˆÙ†ØªØ§Ø¬ Ø§Ø­ØªØ±Ø§ÙÙŠ',                 en:'Video Editing',                     p1:3000, p2:8000, dur:'5-10 Ø£ÙŠØ§Ù…',     kpi:'ØªØ­Ø³ÙŠÙ† Ø¬ÙˆØ¯Ø© Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª | Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„ÙƒØ§Ù…Ù„Ø© 40-70%',warranty:'Ø¥Ø¹Ø§Ø¯Ø© Ù…ÙˆÙ†ØªØ§Ø¬ Ù…Ø¬Ø§Ù†ÙŠØ© Ø­ØªÙ‰ Ø§Ù„Ø±Ø¶Ø§'},
  32: {ar:'Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ',              en:'Video Strategy',                    p1:8000, p2:16000,dur:'1-2 Ø£Ø³Ø¨ÙˆØ¹',    kpi:'ØªÙ†ÙÙŠØ° 70%+ Ù…Ù† Ø§Ù„Ø®Ø·Ø© | Ø¨Ù†Ø§Ø¡ Ø£ØµÙˆÙ„ ÙÙŠØ¯ÙŠÙˆ Ù…Ø³ØªØ¯Ø§Ù…Ø©',       warranty:'Ø§Ø³ØªØ´Ø§Ø±Ø© Ø±Ø¨Ø¹ Ø³Ù†ÙˆÙŠØ© Ù…Ø¬Ø§Ù†ÙŠØ©'},
  33: {ar:'Ø­Ù…Ù„Ø© Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø¬ÙˆØ¬Ù„ Ù„Ù„Ø¨Ø­Ø«',              en:'Google Search Ads',                 p1:3500, p2:8000, dur:'3-5 Ø£ÙŠØ§Ù… Ø¥Ø¹Ø¯Ø§Ø¯',kpi:'ØªØ­Ù‚ÙŠÙ‚ CPA Ø£Ù‚Ù„ Ù…Ù† Ø§Ù„Ù…ØªÙˆØ³Ø· Ø¨Ù€30% | 3-6x Ø¹Ø§Ø¦Ø¯',         warranty:'Ø¶Ù…Ø§Ù† ØªØ­Ù‚ÙŠÙ‚ 50 Ù†Ù‚Ø±Ø© Ù…Ø¤Ù‡Ù„Ø© Ø®Ù„Ø§Ù„ Ø£ÙˆÙ„ 30 ÙŠÙˆÙ…'},
  36: {ar:'Ø­Ù…Ù„Ø© Ø¥Ø¹Ù„Ø§Ù†Ø§Øª ÙÙŠØ³Ø¨ÙˆÙƒ ÙˆØ¥Ù†Ø³ØªØ¬Ø±Ø§Ù…',        en:'Meta Ads',                          p1:3500, p2:8000, dur:'3-7 Ø£ÙŠØ§Ù… Ø¥Ø¹Ø¯Ø§Ø¯',kpi:'CTR 1.5%+ | CPA Ø£Ù‚Ù„ Ù…Ù† Ø§Ù„Ù…Ù†Ø§ÙØ³ÙŠÙ† Ø¨Ù€25%',             warranty:'Ø¶Ù…Ø§Ù† ØªØ­Ù‚ÙŠÙ‚ 100 Ù†Ù‚Ø±Ø© Ù…Ø¤Ù‡Ù„Ø© Ø®Ù„Ø§Ù„ 30 ÙŠÙˆÙ…'},
  37: {ar:'Ø­Ù…Ù„Ø© ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù…Ø­ØªÙ…Ù„ÙŠÙ†',          en:'Lead Generation Campaign',          p1:4000, p2:8500, dur:'5-10 Ø£ÙŠØ§Ù…',     kpi:'ØªØ­Ù‚ÙŠÙ‚ CPL Ø£Ù‚Ù„ Ù…Ù† 50 Ø±.Ø³ | ØªØ­ÙˆÙŠÙ„ 20-40% Ù…Ù† Leads',     warranty:'Ø¶Ù…Ø§Ù† ØªÙˆÙ„ÙŠØ¯ 50+ lead Ù…Ø¤Ù‡Ù„ Ø®Ù„Ø§Ù„ 60 ÙŠÙˆÙ…'},
  38: {ar:'Ø­Ù…Ù„Ø© Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ù„ÙŠÙ†ÙƒØ¯Ø¥Ù†',                 en:'LinkedIn Ads',                      p1:5000, p2:12000,dur:'5-10 Ø£ÙŠØ§Ù…',     kpi:'CPL Ø£Ù‚Ù„ Ù…Ù† 150 Ø±.Ø³ | 4-8x Ø¹Ø§Ø¦Ø¯',                      warranty:'Ø¶Ù…Ø§Ù† ØªÙˆÙ„ÙŠØ¯ 20+ lead Ù…Ø¤Ø³Ø³ÙŠ Ø®Ù„Ø§Ù„ 90 ÙŠÙˆÙ…'},
  40: {ar:'Ø§Ø®ØªØ¨Ø§Ø± A/B Ù„Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª',                 en:'Ad A/B Testing',                    p1:3500, p2:7500, dur:'Ù…Ø³ØªÙ…Ø±',         kpi:'ØªØ­Ø³ÙŠÙ† CTR Ø¨Ù€50-150% Ø®Ù„Ø§Ù„ 3 Ø£Ø´Ù‡Ø± | Ù…Ø¶Ø§Ø¹ÙØ© ROI',        warranty:'Ø¶Ù…Ø§Ù† ØªØ­Ø³ÙŠÙ† 30%+ ÙÙŠ Ø£ÙŠ Ù…Ù‚ÙŠØ§Ø³ Ø±Ø¦ÙŠØ³ÙŠ'},
  42: {ar:'Ø¥Ø¯Ø§Ø±Ø© Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø³Ù†Ø§Ø¨ Ø´Ø§Øª',               en:'Snapchat Ads',                      p1:4000, p2:8000, dur:'5-10 Ø£ÙŠØ§Ù…',     kpi:'CPM Ø£Ù‚Ù„ Ù…Ù† 15 Ø±.Ø³ | 3-6x Ø¹Ø§Ø¦Ø¯',                       warranty:'Ø¶Ù…Ø§Ù† ØªØ­Ù‚ÙŠÙ‚ 100K Ù…Ø´Ø§Ù‡Ø¯Ø© Ø®Ù„Ø§Ù„ 30 ÙŠÙˆÙ…'},
  45: {ar:'ØªØ¯Ù‚ÙŠÙ‚ ÙˆØªØ­Ø³ÙŠÙ† Ø§Ù„Ø­Ù…Ù„Ø§Øª Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©',         en:'Ads Audit',                         p1:5000, p2:10000,dur:'5-10 Ø£ÙŠØ§Ù…',     kpi:'Ø§ÙƒØªØ´Ø§Ù 20+ ÙØ±ØµØ© ØªØ­Ø³ÙŠÙ† | ØªÙˆÙÙŠØ± 30-60% Ù…Ù† Ø§Ù„Ø¥Ù†ÙØ§Ù‚',     warranty:'Ø¶Ù…Ø§Ù† Ø§ÙƒØªØ´Ø§Ù 15+ Ù…Ø´ÙƒÙ„Ø© Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ø¥ØµÙ„Ø§Ø­'},
  47: {ar:'ØªØ¯Ù‚ÙŠÙ‚ Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø´Ø§Ù…Ù„',                 en:'CRO & Funnel Audit',                p1:7500, p2:14000,dur:'1-2 Ø£Ø³Ø¨ÙˆØ¹',    kpi:'ØªØ­Ø¯ÙŠØ¯ 5-10 Ù†Ù‚Ø§Ø· ØªØ³Ø±Ø¨ | Ø®Ø·Ø© Ø±ÙØ¹ CR Ø¨Ù€50-150%',         warranty:'Ø¶Ù…Ø§Ù† Ø§ÙƒØªØ´Ø§Ù 15+ ÙØ±ØµØ© | Ø¬Ù„Ø³Ø© Ø´Ø±Ø­ 90 Ø¯Ù‚ÙŠÙ‚Ø©'},
  48: {ar:'ØªØµÙ…ÙŠÙ… ØµÙØ­Ø© Ù‡Ø¨ÙˆØ· Ø¹Ø§Ù„ÙŠØ© Ø§Ù„ØªØ­ÙˆÙŠÙ„',        en:'High-Conversion Landing Page',      p1:5000, p2:12000,dur:'1-2 Ø£Ø³Ø¨ÙˆØ¹',    kpi:'ØªØ­Ù‚ÙŠÙ‚ Ù…Ø¹Ø¯Ù„ ØªØ­ÙˆÙŠÙ„ 8%+ | 6-12x Ø¹Ø§Ø¦Ø¯',                   warranty:'Ø¥Ø¹Ø§Ø¯Ø© ØªØµÙ…ÙŠÙ… Ù…Ø¬Ø§Ù†ÙŠØ© Ø¥Ø°Ø§ Ù„Ù… ÙŠØªØ­Ù‚Ù‚ 5% ØªØ­ÙˆÙŠÙ„'},
  50: {ar:'Ø±Ø³Ù… Ø±Ø­Ù„Ø© Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø§Ù„Ø´Ø§Ù…Ù„Ø©',              en:'Customer Journey Mapping',          p1:8000, p2:15000,dur:'1-2 Ø£Ø³Ø¨ÙˆØ¹',    kpi:'ØªØ­Ø¯ÙŠØ¯ 10-20 Ù†Ù‚Ø·Ø© Ø£Ù„Ù… | ØªÙ‚Ù„ÙŠÙ„ Ù†Ù‚Ø§Ø· Ø§Ù„Ø§Ø­ØªÙƒØ§Ùƒ 40-60%',   warranty:'Ø¬Ù„Ø³Ø© Ù…ØªØ§Ø¨Ø¹Ø© Ù…Ø¬Ø§Ù†ÙŠØ© Ø¨Ø¹Ø¯ 90 ÙŠÙˆÙ…'},
  51: {ar:'ØªØ­Ø³ÙŠÙ† ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ø¯ÙØ¹ Ø§Ù„ÙƒØ§Ù…Ù„Ø©',            en:'Checkout Experience Optimization',  p1:6000, p2:13000,dur:'1-2 Ø£Ø³Ø¨ÙˆØ¹',    kpi:'ØªÙ‚Ù„ÙŠÙ„ Cart Abandonment Ø¨Ù€30-50% | Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª 40-80%',warranty:'Ø¶Ù…Ø§Ù† ØªØ­Ø³ÙŠÙ† 20%+ ÙÙŠ Ù…Ø¹Ø¯Ù„ Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø¯ÙØ¹'},
  53: {ar:'Ø¨Ù†Ø§Ø¡ Ù‚Ù…Ø¹ Ù…Ø¨ÙŠØ¹Ø§Øª Ø¢Ù„ÙŠ',                  en:'Sales Funnel Automation',           p1:15000,p2:35000,dur:'3-6 Ø£Ø³Ø§Ø¨ÙŠØ¹',   kpi:'ØªØ­ÙˆÙŠÙ„ 15-30% Ù…Ù† Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠÙ† Ù„Ù„Ù‚Ù…Ø¹ | 10-20x Ø¹Ø§Ø¦Ø¯',        warranty:'Ø¶Ù…Ø§Ù† Ø¹Ù…Ù„ Ø§Ù„ØªÙ‚Ù†ÙŠØ© 100% Ø£Ùˆ Ø¥ØµÙ„Ø§Ø­ Ù…Ø¬Ø§Ù†ÙŠ'},
  55: {ar:'ØªØµÙ…ÙŠÙ… Ù†Ù…Ø§Ø°Ø¬ Ø°ÙƒÙŠØ©',                     en:'Smart Forms',                       p1:2500, p2:5500, dur:'3-7 Ø£ÙŠØ§Ù…',      kpi:'Ø²ÙŠØ§Ø¯Ø© Ù…Ø¹Ø¯Ù„ Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ Ø¨Ù€100-200%',                  warranty:'Ø¶Ù…Ø§Ù† ØªØ­Ø³ÙŠÙ† 50%+ Ø£Ùˆ Ø¥Ø¹Ø§Ø¯Ø© ØªØµÙ…ÙŠÙ…'},
  62: {ar:'Ø³Ù„Ø³Ù„Ø© ØªØ±Ø­ÙŠØ¨ Ø¢Ù„ÙŠØ©',                     en:'Welcome Email Series',              p1:4000, p2:8000, dur:'5-10 Ø£ÙŠØ§Ù…',     kpi:'ØªØ­ÙˆÙŠÙ„ 20-40% Ù…Ù† Ø§Ù„Ù…Ø´ØªØ±ÙƒÙŠÙ† Ù„Ø¹Ù…Ù„Ø§Ø¡ | 8-15x Ø¹Ø§Ø¦Ø¯',       warranty:'Ø¥Ø¹Ø§Ø¯Ø© ÙƒØªØ§Ø¨Ø© Ù…Ø¬Ø§Ù†ÙŠØ© Ø¥Ø°Ø§ Ù„Ù… ÙŠØªØ­Ù‚Ù‚ 15% ØªØ­ÙˆÙŠÙ„'},
  64: {ar:'Ù†Ø´Ø±Ø© Ø¨Ø±ÙŠØ¯ÙŠØ© Ø£Ø³Ø¨ÙˆØ¹ÙŠØ©',                  en:'Weekly Newsletter',                 p1:3000, p2:7000, dur:'Ù…Ø³ØªÙ…Ø±',         kpi:'Ø§Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Open Rate 25%+',                            warranty:'Ø¶Ù…Ø§Ù† ØªØ­Ù‚ÙŠÙ‚ 20%+ Open Rate'},
  68: {ar:'ØªØ­Ø³ÙŠÙ† Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªÙˆØµÙŠÙ„',                   en:'Email Deliverability Optimization', p1:4000, p2:8500, dur:'5-10 Ø£ÙŠØ§Ù…',     kpi:'Ø²ÙŠØ§Ø¯Ø© Inbox Rate Ù…Ù† 70% Ø¥Ù„Ù‰ 95%+',                    warranty:'Ø¶Ù…Ø§Ù† ØªØ­Ù‚ÙŠÙ‚ 90%+ Inbox Rate'},
  69: {ar:'Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© ØªØ³ÙˆÙŠÙ‚ Ø¨Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø´Ø§Ù…Ù„Ø©',       en:'Email Marketing Strategy',          p1:7000, p2:14000,dur:'1-2 Ø£Ø³Ø¨ÙˆØ¹',    kpi:'Ø¨Ù†Ø§Ø¡ Ù‚Ù†Ø§Ø© Email ØªØ¯Ø± 20-40% Ù…Ù† Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯',               warranty:'Ø§Ø³ØªØ´Ø§Ø±Ø© Ø±Ø¨Ø¹ Ø³Ù†ÙˆÙŠØ© Ù…Ø¬Ø§Ù†ÙŠØ©'},
  70: {ar:'Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„ÙÙƒØ±Ø©',                 en:'Idea Validation',                   p1:8000, p2:16000,dur:'2-3 Ø£Ø³Ø§Ø¨ÙŠØ¹',   kpi:'ØªÙˆÙÙŠØ± 100,000+ Ø±.Ø³ Ù…Ù† Ø®Ø³Ø§Ø±Ø© Ù…Ø­ØªÙ…Ù„Ø©',                  warranty:'Ø¬Ù„Ø³Ø© Ø§Ø³ØªØ´Ø§Ø±ÙŠØ© Ù…ØªØ§Ø¨Ø¹Ø© Ù…Ø¬Ø§Ù†ÙŠØ©'},
  71: {ar:'Ù…Ø¹Ø±ÙØ© Ø¹Ù…ÙŠÙ„Ùƒ â€” Ø§Ù„Ø´Ø®ØµÙŠØ© ÙˆØ§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„ Ø§Ù„Ù…Ø«Ø§Ù„ÙŠ',en:'Buyer Persona & ICP',           p1:8000, p2:16000,dur:'1-2 Ø£Ø³Ø¨ÙˆØ¹',    kpi:'Ø±ÙØ¹ Ø¯Ù‚Ø© Ø§Ù„Ø§Ø³ØªÙ‡Ø¯Ø§Ù Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†ÙŠ Ø¨Ù€40-80%',                 warranty:'Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø´Ø®ØµÙŠØ§Øª Ø¨Ø¹Ø¯ 90 ÙŠÙˆÙ… + ÙˆØ±Ø´Ø© ØªØ·Ø¨ÙŠÙ‚'},
  72: {ar:'Ø§Ø³ØªØ´Ø§Ø±Ø© Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© ØªØ³ÙˆÙŠÙ‚ÙŠØ©',           en:'Marketing Consultation',            p1:3500, p2:7000, dur:'2-3 Ø³Ø§Ø¹Ø§Øª',     kpi:'ÙˆØ¶ÙˆØ­ Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠ 100% | Ø®Ø·Ø© 90 ÙŠÙˆÙ…',                    warranty:'Ù…ØªØ§Ø¨Ø¹Ø© Email Ù…Ø¬Ø§Ù†ÙŠØ© 30 ÙŠÙˆÙ…'},
  73: {ar:'ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ù†Ø§ÙØ³ÙŠÙ† Ø§Ù„Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠ Ø§Ù„Ø´Ø§Ù…Ù„',   en:'Competitive Intelligence',          p1:7500, p2:14000,dur:'1-2 Ø£Ø³Ø¨ÙˆØ¹',    kpi:'Ø§ÙƒØªØ´Ø§Ù 5-10 ÙØ±Øµ ØªÙ…Ø§ÙŠØ² | 3+ ÙØ¬ÙˆØ§Øª ÙÙˆØ±ÙŠØ©',             warranty:'Ø¬Ù„Ø³Ø© Ø´Ø±Ø­ 90 Ø¯Ù‚ÙŠÙ‚Ø© + Ø®Ø·Ø© ØªØ·Ø¨ÙŠÙ‚'},
  74: {ar:'ØªØ­Ù„ÙŠÙ„ Jobs to Be Done',                en:'JTBD Analysis',                     p1:4500, p2:10000,dur:'1-2 Ø£Ø³Ø¨ÙˆØ¹',    kpi:'5-10 Job Stories Ù…ÙˆØ«Ù‘Ù‚Ø© | Ø±Ø³Ø§Ø¦Ù„ Ø¨Ù„ØºØ© Ø§Ù„Ø¹Ù…ÙŠÙ„',         warranty:'ÙˆØ±Ø´Ø© ØªØ·Ø¨ÙŠÙ‚ Ù„ØªØ±Ø¬Ù…Ø© Job Stories Ù„Ø±Ø³Ø§Ø¦Ù„'},
  76: {ar:'ÙˆØ±Ø´Ø© Ø¹Ù…Ù„ Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ©',                  en:'Strategy Workshop',                 p1:12000,p2:25000,dur:'ÙŠÙˆÙ… ÙƒØ§Ù…Ù„',       kpi:'Ø¨Ù†Ø§Ø¡ Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© Ù…ÙˆØ­Ø¯Ø© | OKRs Ù„Ù„Ø±Ø¨Ø¹ Ø§Ù„Ù‚Ø§Ø¯Ù…',            warranty:'Ø¬Ù„Ø³Ø© Ù…ØªØ§Ø¨Ø¹Ø© Ø¨Ø¹Ø¯ 60 ÙŠÙˆÙ…'},
  78: {ar:'Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø³ÙˆØ´ÙŠØ§Ù„ Ù…ÙŠØ¯ÙŠØ§',      en:'Social Content Strategy',           p1:8000, p2:16000,dur:'1-2 Ø£Ø³Ø¨ÙˆØ¹',    kpi:'Ø²ÙŠØ§Ø¯Ø© Ø§Ù„ÙˆØµÙˆÙ„ Ø§Ù„Ø¹Ø¶ÙˆÙŠ Ø¨Ù€200-400%',                       warranty:'Ø§Ø³ØªØ´Ø§Ø±Ø© Ø±Ø¨Ø¹ Ø³Ù†ÙˆÙŠØ© Ù…Ø¬Ø§Ù†ÙŠØ©'},
  79: {ar:'ØªØµÙ…ÙŠÙ… Ù…Ø­ØªÙˆÙ‰ Ø¨ØµØ±ÙŠ Ù„Ù„Ø³ÙˆØ´ÙŠØ§Ù„ Ù…ÙŠØ¯ÙŠØ§',     en:'Social Graphics Package',           p1:3000, p2:7000, dur:'Ù…Ø³ØªÙ…Ø±',         kpi:'Ø²ÙŠØ§Ø¯Ø© Ø§Ù„ØªÙØ§Ø¹Ù„ Ø¨Ù€100-200%',                             warranty:'Ø¥Ø¹Ø§Ø¯Ø© ØªØµÙ…ÙŠÙ… Ù…Ø¬Ø§Ù†ÙŠØ© Ø­ØªÙ‰ Ø§Ù„Ø±Ø¶Ø§'},
  82: {ar:'ØªØ¯Ù‚ÙŠÙ‚ Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ø³ÙˆØ´ÙŠØ§Ù„ Ù…ÙŠØ¯ÙŠØ§',          en:'Social Media Audit',                p1:4000, p2:8000, dur:'5-10 Ø£ÙŠØ§Ù…',     kpi:'Ø§ÙƒØªØ´Ø§Ù 20+ ÙØ±ØµØ© ØªØ­Ø³ÙŠÙ† ÙÙˆØ±ÙŠØ© | 5-10x Ø¹Ø§Ø¦Ø¯',           warranty:'Ø¬Ù„Ø³Ø© Ø´Ø±Ø­ Ù…ÙØµÙ„Ø© 90 Ø¯Ù‚ÙŠÙ‚Ø©'},
  84: {ar:'ØªØ­Ø³ÙŠÙ† Ù…Ù„ÙØ§Øª Ø§Ù„Ø³ÙˆØ´ÙŠØ§Ù„ Ù…ÙŠØ¯ÙŠØ§',           en:'Profiles Optimization',             p1:2000, p2:4500, dur:'2-4 Ø£ÙŠØ§Ù…',      kpi:'Ø²ÙŠØ§Ø¯Ø© Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ù…Ù† Ø²Ø§Ø¦Ø± Ù„Ù…ØªØ§Ø¨Ø¹ Ø¨Ù€60-100%',         warranty:'Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ø³ÙŠÙ† Ù…Ø¬Ø§Ù†ÙŠØ© Ø¨Ø¹Ø¯ 60 ÙŠÙˆÙ…'},
  89: {ar:'Ø¥Ø¹Ø¯Ø§Ø¯ Google Analytics 4 Ø§Ù„ÙƒØ§Ù…Ù„',      en:'GA4 Full Setup',                    p1:4500, p2:9000, dur:'5-10 Ø£ÙŠØ§Ù…',     kpi:'Ø¯Ù‚Ø© Ø¨ÙŠØ§Ù†Ø§Øª 98%+',                                      warranty:'Ø¯Ø¹Ù… ÙÙ†ÙŠ 60 ÙŠÙˆÙ… Ù…Ø¬Ø§Ù†ÙŠ'},
  90: {ar:'ØªØµÙ…ÙŠÙ… Ù„ÙˆØ­Ø§Øª ØªØ­ÙƒÙ… ØªÙØ§Ø¹Ù„ÙŠØ©',             en:'Custom Dashboards',                 p1:3500, p2:7500, dur:'5-10 Ø£ÙŠØ§Ù…',     kpi:'ØªÙˆÙÙŠØ± 10-20 Ø³Ø§Ø¹Ø© Ø¹Ù…Ù„ Ø´Ù‡Ø±ÙŠØ§Ù‹',                          warranty:'ØªØ­Ø¯ÙŠØ«Ø§Øª Ù…Ø¬Ø§Ù†ÙŠØ© 90 ÙŠÙˆÙ…'},
  93: {ar:'Ø¥Ø¹Ø¯Ø§Ø¯ ØªØªØ¨Ø¹ Ø§Ù„ØªØ­ÙˆÙŠÙ„Ø§Øª Ø§Ù„Ø´Ø§Ù…Ù„',          en:'Conversion Tracking Setup',         p1:4000, p2:8500, dur:'5-10 Ø£ÙŠØ§Ù…',     kpi:'Ø¯Ù‚Ø© ØªØªØ¨Ø¹ 98%+ | ØªØ­Ø³ÙŠÙ† ROAS Ø¨Ù€30-60%',                 warranty:'Ø¥ØµÙ„Ø§Ø­ Ù…Ø¬Ø§Ù†ÙŠ Ù„Ø£ÙŠ Ù…Ø´ÙƒÙ„Ø© Ø®Ù„Ø§Ù„ 90 ÙŠÙˆÙ…'},
  94: {ar:'ØªØ¯Ù‚ÙŠÙ‚ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª',               en:'Analytics Data Audit',              p1:4500, p2:9000, dur:'5-10 Ø£ÙŠØ§Ù…',     kpi:'Ø±ÙØ¹ Ø¯Ù‚Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† 60-70% Ø¥Ù„Ù‰ 98%+',                 warranty:'Ø¶Ù…Ø§Ù† Ø¯Ù‚Ø© 95%+ Ø£Ùˆ Ø¥Ø¹Ø§Ø¯Ø© Ø¹Ù…Ù„'},
  97: {ar:'Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© Ø§Ù„ØªØ³ÙˆÙŠÙ‚ Ø¨Ø§Ù„Ù…Ø¤Ø«Ø±ÙŠÙ†',        en:'Influencer Strategy',               p1:8000, p2:16000,dur:'1-2 Ø£Ø³Ø¨ÙˆØ¹',    kpi:'Ø¨Ù†Ø§Ø¡ Ø®Ø·Ø© ØªÙØ­Ù‚Ù‚ 5-8x ROI',                             warranty:'Ø§Ø³ØªØ´Ø§Ø±Ø© Ø±Ø¨Ø¹ Ø³Ù†ÙˆÙŠØ© Ù…Ø¬Ø§Ù†ÙŠØ©'},
  98: {ar:'Ø§Ù„Ø¨Ø­Ø« ÙˆØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…Ø¤Ø«Ø±ÙŠÙ†',               en:'Influencer Vetting',                p1:5000, p2:10000,dur:'1-2 Ø£Ø³Ø¨ÙˆØ¹',    kpi:'ØªÙˆÙÙŠØ± 40-60% Ù…Ù† Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø¨ØªØ¬Ù†Ø¨ Ø§Ù„Ù…Ø²ÙŠÙÙŠÙ†',            warranty:'Ø¶Ù…Ø§Ù† Ø¬ÙˆØ¯Ø© Ø§Ù„Ù…Ø¤Ø«Ø±ÙŠÙ† Ø£Ùˆ Ø§Ø³ØªØ¨Ø¯Ø§Ù„'},
  99: {ar:'Ø§Ù„ØªÙØ§ÙˆØ¶ ÙˆØ¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø¤Ø«Ø±ÙŠÙ†',             en:'Influencer Management',             p1:6000, p2:14000,dur:'Ø­Ø³Ø¨ Ù…Ø¯Ø© Ø§Ù„Ø­Ù…Ù„Ø©', kpi:'ØªÙˆÙÙŠØ± 30-50% Ù…Ù† ØªÙƒÙ„ÙØ© Ø§Ù„Ù…Ø¤Ø«Ø±ÙŠÙ†',                      warranty:'Ø¶Ù…Ø§Ù† Ø§Ù„ØªØ²Ø§Ù… Ø§Ù„Ù…Ø¤Ø«Ø±ÙŠÙ† Ø¨Ø§Ù„Ø¹Ù‚Ø¯'},
  100:{ar:'Ø­Ù…Ù„Ø© Ù…Ø¤Ø«Ø±ÙŠÙ† ØµØºØ§Ø±',                    en:'Micro-Influencer Campaign',         p1:10000,p2:25000,dur:'1-3 Ø£Ø´Ù‡Ø±',     kpi:'ØªØ­Ù‚ÙŠÙ‚ 1M+ ÙˆØµÙˆÙ„ | 6-10x Ø¹Ø§Ø¦Ø¯',                         warranty:'Ø¶Ù…Ø§Ù† Ø§Ù„ÙˆØµÙˆÙ„ Ø§Ù„Ù…ØªÙÙ‚ Ø¹Ù„ÙŠÙ‡ Ø£Ùˆ ØªØ¹ÙˆÙŠØ¶'},
  102:{ar:'Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© ØªÙ…ÙˆØ¶Ø¹ Ø§Ù„Ø¹Ù„Ø§Ù…Ø©',            en:'Brand Positioning Strategy',        p1:10000,p2:20000,dur:'2-3 Ø£Ø³Ø§Ø¨ÙŠØ¹',   kpi:'ÙˆØ¶ÙˆØ­ ÙƒØ§Ù…Ù„ ÙÙŠ Ø§Ù„ØªÙ…ÙˆØ¶Ø¹ | 10-20x Ø¹Ø§Ø¦Ø¯ Ù…Ù† Ø§Ù„ØªÙ…Ø§ÙŠØ²',       warranty:'3 Ø¬Ù„Ø³Ø§Øª Ø§Ø³ØªØ´Ø§Ø±ÙŠØ© Ù…ØªØ§Ø¨Ø¹Ø©'},
  103:{ar:'ØªØµÙ…ÙŠÙ… Ù‡ÙˆÙŠØ© Ø§Ù„Ø¹Ù„Ø§Ù…Ø© Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ©',         en:'Brand Identity Design',             p1:12000,p2:28000,dur:'3-4 Ø£Ø³Ø§Ø¨ÙŠØ¹',   kpi:'Ø¨Ù†Ø§Ø¡ Ù‡ÙˆÙŠØ© Ù…Ù…ÙŠØ²Ø© Ù„Ø§ ØªÙÙ†Ø³Ù‰ | Ø£ØµÙ„ ÙŠØ¯ÙˆÙ… 5-10 Ø³Ù†ÙˆØ§Øª',     warranty:'Ù…Ø±Ø§Ø¬Ø¹Ø§Øª ØºÙŠØ± Ù…Ø­Ø¯ÙˆØ¯Ø© Ø­ØªÙ‰ Ø§Ù„Ø±Ø¶Ø§'},
  104:{ar:'Ø¯Ù„ÙŠÙ„ ØµÙˆØª ÙˆÙ†Ø¨Ø±Ø© Ø§Ù„Ø¹Ù„Ø§Ù…Ø© Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ©',     en:'Brand Voice Guide',                 p1:5000, p2:12000,dur:'1-2 Ø£Ø³Ø¨ÙˆØ¹',    kpi:'Ø§ØªØ³Ø§Ù‚ 90%+ ÙÙŠ ÙƒÙ„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„',                            warranty:'ÙˆØ±Ø´Ø© ØªØ¯Ø±ÙŠØ¨ Ù…Ø¬Ø§Ù†ÙŠØ© Ù„Ù„ÙØ±ÙŠÙ‚ (Ø³Ø§Ø¹ØªØ§Ù†)'},
  106:{ar:'ØªØ¯Ù‚ÙŠÙ‚ Ø§ØªØ³Ø§Ù‚ Ø§Ù„Ø¹Ù„Ø§Ù…Ø©',                 en:'Brand Consistency Audit',           p1:5000, p2:10000,dur:'1-2 Ø£Ø³Ø¨ÙˆØ¹',    kpi:'ØªØ­Ù‚ÙŠÙ‚ Ø§ØªØ³Ø§Ù‚ 95%+ ÙÙŠ ÙƒÙ„ Ø§Ù„Ù‚Ù†ÙˆØ§Øª',                      warranty:'Ø¬Ù„Ø³Ø© Ø´Ø±Ø­ Ù…ÙØµÙ„Ø© + Ù‚ÙˆØ§Ù„Ø¨ Ù…ÙØ­Ø¯Ù‘Ø«Ø©'},
  109:{ar:'ØµÙˆØª Ø§Ù„Ø¹Ù…ÙŠÙ„ ÙˆØªÙ‚Ø³ÙŠÙ… Ø§Ù„Ø³ÙˆÙ‚',             en:'Voice of Customer & Segmentation',  p1:5000, p2:12000,dur:'1-2 Ø£Ø³Ø¨ÙˆØ¹',    kpi:'100+ Ø§Ù‚ØªØ¨Ø§Ø³ Ù…ØµÙ†Ù‘Ù | 3-5 Ø´Ø±Ø§Ø¦Ø­ | Ù‚Ø§Ù…ÙˆØ³ Ù„ØºØ© Ø§Ù„Ø¹Ù…ÙŠÙ„',   warranty:'Ù‚Ø§Ù…ÙˆØ³ Ù„ØºØ© Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø¬Ø§Ù‡Ø² Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ÙÙˆØ±ÙŠ'},
  110:{ar:'Ø¨Ù†Ø§Ø¡ Ù‚ØµØ© Ø§Ù„Ø¹Ù„Ø§Ù…Ø© Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ©',           en:'Brand Story & Narrative',           p1:4000, p2:9000, dur:'1 Ø£Ø³Ø¨ÙˆØ¹',      kpi:'3 Ù†Ø³Ø® Ø¨Ø£Ø·ÙˆØ§Ù„ Ù…Ø®ØªÙ„ÙØ© | ØµÙŠØ§ØºØ© Ø¬Ø§Ù‡Ø²Ø© Ù„Ù€5 Ù…Ù†ØµØ§Øª',        warranty:'3 Ù†Ø³Ø® (Ø·ÙˆÙŠÙ„/Ù…ØªÙˆØ³Ø·/Ù‚ØµÙŠØ±)'},
  111:{ar:'Ø¥Ø¹Ø¯Ø§Ø¯ Ù…ØªØ¬Ø± Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø§Ø­ØªØ±Ø§ÙÙŠ',         en:'E-commerce Store Setup',            p1:10000,p2:25000,dur:'2-4 Ø£Ø³Ø§Ø¨ÙŠØ¹',   kpi:'Ø¥Ø·Ù„Ø§Ù‚ Ù…ØªØ¬Ø± Ø§Ø­ØªØ±Ø§ÙÙŠ Ø®Ù„Ø§Ù„ 30 ÙŠÙˆÙ… | Ø¥ÙŠØ±Ø§Ø¯ ÙÙˆØ±ÙŠ',        warranty:'Ø¯Ø¹Ù… ÙÙ†ÙŠ 30 ÙŠÙˆÙ… Ù…Ø¬Ø§Ù†ÙŠ'},
  112:{ar:'ØªØ­Ø³ÙŠÙ† ØµÙØ­Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ù„Ù„ØªØ­ÙˆÙŠÙ„',        en:'Product Page CRO',                  p1:8000, p2:18000,dur:'2-3 Ø£Ø³Ø§Ø¨ÙŠØ¹',   kpi:'Ø²ÙŠØ§Ø¯Ø© Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø¨Ù€50-150% | 8-15x Ø¹Ø§Ø¦Ø¯',           warranty:'Ø¶Ù…Ø§Ù† ØªØ­Ø³ÙŠÙ† 30%+ Ø£Ùˆ Ø¥Ø¹Ø§Ø¯Ø© Ø¹Ù…Ù„'},
  115:{ar:'Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© Upsell & Cross-sell',       en:'Revenue Maximization (Upsell)',     p1:6000, p2:13000,dur:'1-2 Ø£Ø³Ø¨ÙˆØ¹',    kpi:'Ø²ÙŠØ§Ø¯Ø© AOV Ø¨Ù€30-50% | 10-20x Ø¹Ø§Ø¦Ø¯',                    warranty:'Ø¶Ù…Ø§Ù† Ø²ÙŠØ§Ø¯Ø© AOV Ø¨Ù€20%+ Ø®Ù„Ø§Ù„ 90 ÙŠÙˆÙ…'},
  118:{ar:'ØªØ­Ø³ÙŠÙ† Ù…ØªØ¬Ø± Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù‚Ø§Ø¦Ù…',            en:'Existing Store Optimization',       p1:5000, p2:12000,dur:'1-2 Ø£Ø³Ø¨ÙˆØ¹',    kpi:'Ø±ÙØ¹ CR Ø¨Ù€30-60% | ØªØ­Ù…ÙŠÙ„ ÙÙŠ 2 Ø«Ø§Ù†ÙŠØ©',                  warranty:'ØªÙ‚Ø±ÙŠØ± Ù…Ù‚Ø§Ø±Ù†Ø© Ù‚Ø¨Ù„ ÙˆØ¨Ø¹Ø¯ + Ø®Ø·Ø© ØªØ­Ø³ÙŠÙ†'},
  119:{ar:'ØªØ¬Ø±Ø¨Ø© Ø§Ù„ØªØ³ÙˆÙ‚ Ø¹Ø¨Ø± Ø§Ù„Ø¬ÙˆØ§Ù„',             en:'Mobile Commerce UX',                p1:4000, p2:9000, dur:'1-2 Ø£Ø³Ø¨ÙˆØ¹',    kpi:'Ø±ÙØ¹ CR Ø§Ù„Ø¬ÙˆØ§Ù„ Ø¨Ù€40-70%',                               warranty:'Ø§Ø®ØªØ¨Ø§Ø± Ø¹Ù„Ù‰ 5+ Ø£Ø¬Ù‡Ø²Ø© Ù…Ø®ØªÙ„ÙØ©'},
  122:{ar:'Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ Ù„Ø®Ø¯Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡',         en:'Smart Customer Assistant (AI-1)',   p1:8000, p2:18000,dur:'7 Ø£ÙŠØ§Ù… Ø¹Ù…Ù„',   kpi:'Ø±Ø¯ Ø£Ù‚Ù„ Ù…Ù† 3 Ø«ÙˆØ§Ù†Ù | ØªØ®ÙÙŠØ¶ Ø§Ù„Ø±Ø¯ Ø§Ù„ÙŠØ¯ÙˆÙŠ 40-60%',       warranty:'Ø¥ØµÙ„Ø§Ø­ Ù…Ø¬Ø§Ù†ÙŠ 30 ÙŠÙˆÙ…Ø§Ù‹'},
  123:{ar:'Ø§Ù„Ù…ÙˆØ¸Ù Ø§Ù„Ø±Ù‚Ù…ÙŠ Ø§Ù„Ø°ÙƒÙŠ',                 en:'Autonomous AI Agent (AI-2)',        p1:9000, p2:20000,dur:'7-12 ÙŠÙˆÙ… Ø¹Ù…Ù„', kpi:'ØªÙˆÙÙŠØ± 15-20 Ø³Ø§Ø¹Ø© Ø£Ø³Ø¨ÙˆØ¹ÙŠØ§Ù‹',                           warranty:'Ø¶Ù…Ø§Ù† Ø£Ø¯Ø§Ø¡ 90 ÙŠÙˆÙ…Ø§Ù‹ Ø¨Ù…Ø¹Ø§ÙŠÙŠØ± Ù…ÙƒØªÙˆØ¨Ø©'},
  124:{ar:'Ø§Ù„Ø°Ø§ÙƒØ±Ø© Ø§Ù„Ø°ÙƒÙŠØ© Ù„Ø´Ø±ÙƒØªÙƒ',               en:'AI Knowledge Base (AI-3)',          p1:12000,p2:25000,dur:'7-14 ÙŠÙˆÙ… Ø¹Ù…Ù„', kpi:'Ø¯Ù‚Ø© 95%+ | ØµÙØ± Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…Ø®ØªÙ„Ù‚Ø©',                       warranty:'Ø¶Ù…Ø§Ù† Ø¯Ù‚Ø© 95% ÙˆØ¥Ù„Ø§ Ø¥Ø¹Ø§Ø¯Ø© Ø¨Ù†Ø§Ø¡ Ù…Ø¬Ø§Ù†ÙŠØ©'}
};

/* â”€â”€ Featured service matrices â”€â”€ */
// Priority 3 (base): execution_capacity
const EXEC_MATRIX = {
  SEO: {solo:1,small_team:6,dedicated_team:16,agency_external:2},
  CRO: {solo:55,small_team:47,dedicated_team:53,agency_external:47},
  ADV: {solo:33,small_team:36,dedicated_team:37,agency_external:45},
  VID: {solo:22,small_team:26,dedicated_team:32,agency_external:31},
  EML: {solo:62,small_team:64,dedicated_team:69,agency_external:68},
  STR: {solo:72,small_team:73,dedicated_team:76,agency_external:72},
  SOC: {solo:84,small_team:79,dedicated_team:78,agency_external:82},
  ANL: {solo:89,small_team:90,dedicated_team:93,agency_external:94},
  INF: {solo:100,small_team:98,dedicated_team:97,agency_external:99},
  BRD: {solo:104,small_team:102,dedicated_team:103,agency_external:106},
  ECO: {solo:118,small_team:111,dedicated_team:112,agency_external:118},
  AI:  {solo:122,small_team:122,dedicated_team:123,agency_external:124}
};

// Priority 2: geo_focus (SEO, ADV, INF, SOC only)
const GEO_OVERRIDE = {
  SEO: {local:3, national:2, regional:16, international:16},
  ADV: {local:42, national:36, regional:33, international:38},
  INF: {local:100, national:98, regional:99, international:97},
  SOC: {local:84, national:78} // regional/international â†’ fall back
};

// Priority 1 (highest): product_stage â€” startup only
// null means "do not show this block"
const PS_OVERRIDE = {
  STR: {idea:70, pre_launch:71, launched_no_revenue:70, launched_with_revenue:72},
  BRD: {idea:102, pre_launch:103, launched_no_revenue:102, launched_with_revenue:102},
  CRO: {idea:50, pre_launch:48, launched_no_revenue:47, launched_with_revenue:51},
  SEO: {idea:1, pre_launch:9, launched_no_revenue:6, launched_with_revenue:1},
  VID: {idea:null, pre_launch:27, launched_no_revenue:26, launched_with_revenue:22},
  ADV: {idea:null, pre_launch:null, launched_no_revenue:36, launched_with_revenue:36},
  EML: {idea:null, pre_launch:null, launched_no_revenue:62, launched_with_revenue:64}
};

// Supporting services pool per block, ordered by timeline
const SUPPORT_POOL = {
  SEO: {fast:[3,1,16,17],    sustained:[1,17,16,6]},
  CRO: {fast:[48,55,50],     sustained:[53,50,48]},
  ADV: {fast:[36,33,37],     sustained:[40,36,45]},
  VID: {fast:[22,31,26],     sustained:[17,32,26]},
  EML: {fast:[62,68,64],     sustained:[69,64,62]},
  STR: {fast:[72,73,74],     sustained:[73,76,72]},
  SOC: {fast:[84,79,82],     sustained:[78,82,84]},
  ANL: {fast:[89,93,90],     sustained:[94,90,93]},
  INF: {fast:[100,98,99],    sustained:[97,99,100]},
  BRD: {fast:[104,106,110],  sustained:[102,103,110]},
  ECO: {fast:[118,119,112],  sustained:[112,115,118]},
  AI:  {fast:[122,123,124],  sustained:[123,124,122]}
};

/* â”€â”€ Foundation layer check â”€â”€ */
function checkFoundation(blockId, vars){
  if(blockId==='SEO' && ['new','tried_failed'].includes(vars.marketing_history)) return 19;
  if(blockId==='STR' && ['awareness','conversion'].includes(vars.challenge)) return 74;
  if(blockId==='BRD' && ['smb','enterprise'].includes(vars.type) && vars.marketing_history!=='new') return 109;
  return null;
}

/* â”€â”€ Select featured service â€” 3-layer priority â”€â”€
 *
 * Priority order (highest â†’ lowest):
 *   1. product_stage override  (Â§3.4 â€” startup only, overrides everything)
 *   2. geo_focus override      (Â§3.3 â€” SEO, ADV, INF, SOC only)
 *   3. execution_capacity      (Â§3.2 â€” base fallback for all blocks)
 *
 * Spec conflict â€” BRD + idea/pre_launch:
 *   Â§3.4 table says: BRD+idea=#102, BRD+pre_launch=#103
 *   Â§3.0 says: product_stage=idea/pre_launch â†’ BRD.featured_service=#110
 *   RESOLUTION: Â§3.0 (Foundation Layer) is more specific and named
 *   "Brand Story & Narrative" as the entry point for early-stage brands.
 *   We apply Â§3.0 AFTER Â§3.4 fires, overriding 102/103 â†’ 110.
 */
function selectFeatured(blockId, vars){
  let featuredId = null;
  let overrideType = 'execution'; // track which layer fired

  // Layer 1: product_stage (startup only â€” highest priority)
  if(vars.type==='startup' && vars.product_stage && PS_OVERRIDE[blockId]){
    const ps = PS_OVERRIDE[blockId][vars.product_stage];
    if(ps===null) return {id:null, overrideType:'product_stage_hide'}; // hidden block
    if(ps!==undefined){ featuredId=ps; overrideType='product_stage'; }
  }

  // Layer 2: geo_focus (only for SEO, ADV, INF, SOC â€” if not already overridden)
  if(!featuredId && GEO_OVERRIDE[blockId]){
    const geo = GEO_OVERRIDE[blockId][vars.geo_focus];
    if(geo){ featuredId=geo; overrideType='geo_focus'; }
  }

  // Layer 3: execution_capacity (base fallback)
  if(!featuredId){
    featuredId = EXEC_MATRIX[blockId]?.[vars.execution_capacity];
    overrideType='execution';
  }

  // Special: if BRD and product_stage=idea/pre_launch â†’ featured=110 (Brand Story)
  if(blockId==='BRD' && vars.type==='startup' && ['idea','pre_launch'].includes(vars.product_stage) && overrideType==='product_stage'){
    // PS_OVERRIDE already handles BRD. ideaâ†’102, pre_launchâ†’103. #110 is set separately per spec Â§3.0
    // Â§3.0 says: if product_stage=idea/pre_launch â†’ BRD.featured_service=#110
    featuredId=110; overrideType='product_stage';
  }

  return {id:featuredId, overrideType};
}

/* â”€â”€ Select supporting services â”€â”€ */
function selectSupporting(blockId, vars, featuredId){
  const tl = vars.timeline==='fast'?'fast':'sustained';
  const pool = SUPPORT_POOL[blockId]?.[tl] || [];
  // Exclude the featured service from supporting list
  return pool.filter(id=>id!==featuredId).slice(0,2);
}

/* â”€â”€ Compute confidence score â”€â”€ */
function computeConfidence(blockId, vars, overrideType){
  let score = 65;
  if(overrideType==='product_stage') score+=20;
  else if(overrideType==='geo_focus') score+=12;
  else score+=8;
  // Challenge-block bonus
  const CBO={awareness:['ADV','SOC','INF','VID'],conversion:['CRO','ADV','EML'],
              retention:['EML','SOC'],growth:['ADV','VID','ANL'],cac:['ADV','ANL'],
              system:['AI','ANL'],validation:['STR'],roadmap:['STR'],bizplan:['STR']};
  if((CBO[vars.challenge]||[]).includes(blockId)) score+=7;
  return Math.min(97,score);
}

/* â”€â”€ Main Unit 3 selector â”€â”€ */
function runUnit3(u2, vars){
  // Build ordered block list: fixed â†’ sector â†’ selective â†’ anchor
  const allBlocks = [
    ...u2.fixed_blocks.map(id=>({block_id:id,type:'fixed',rank:null,score:null})),
    ...u2.sector_blocks.map(id=>({block_id:id,type:'sector',rank:null,score:null})),
    ...u2.selective_blocks.map(b=>({block_id:b.block_id,type:'rank',rank:b.rank,score:b.score})),
    {block_id:'ANL',type:'anchor',rank:null,score:u2.anchor_block.score}
  ];

  const result_blocks = [];
  let totalPriceMin = 0, totalPriceMax = 0;

  for(const blk of allBlocks){
    const {id:featuredId, overrideType} = selectFeatured(blk.block_id, vars);

    // Skip if block hidden by product_stage (e.g. VID for "idea" stage startup)
    if(overrideType==='product_stage_hide') continue;

    // Foundation service for this block
    const foundationId = checkFoundation(blk.block_id, vars);

    // Supporting services
    const supportingIds = selectSupporting(blk.block_id, vars, featuredId);

    const featuredSvc = SVC[featuredId];
    if(!featuredSvc) continue; // safety guard

    const confidence = computeConfidence(blk.block_id, vars, overrideType);

    if(featuredSvc.p1) totalPriceMin += featuredSvc.p1;
    if(featuredSvc.p2) totalPriceMax += featuredSvc.p2;

    result_blocks.push({
      position: result_blocks.length+1,
      block_id: blk.block_id,
      block_name: BLOCK_META[blk.block_id].name,
      block_icon: BLOCK_META[blk.block_id].icon,
      block_type: blk.type,
      block_rank: blk.rank,
      block_score: blk.score,
      featured_service: {
        id: featuredId,
        name_ar: featuredSvc.ar,
        name_en: featuredSvc.en,
        price_from: featuredSvc.p1,
        price_to: featuredSvc.p2,
        duration: featuredSvc.dur,
        kpi: featuredSvc.kpi,
        warranty: featuredSvc.warranty,
        justification: null, // filled by API
        confidence_match: confidence,
        override_type: overrideType
      },
      foundation_service: foundationId ? {
        id: foundationId,
        name_ar: SVC[foundationId]?.ar,
        price_from: SVC[foundationId]?.p1,
        price_to: SVC[foundationId]?.p2
      } : null,
      supporting_services: supportingIds.map(id=>({
        id, name_ar:SVC[id]?.ar, price_from:SVC[id]?.p1, price_to:SVC[id]?.p2
      }))
    });
  }

  // Compute overall confidence
  const overallConf = result_blocks.length
    ? Math.round(result_blocks.reduce((s,b)=>s+b.featured_service.confidence_match,0)/result_blocks.length)
    : 0;

  return {
    session_id: S.sessionId,
    result_blocks,
    total_blocks_shown: result_blocks.length,
    collapsed_blocks: Math.max(0,result_blocks.length-3), // top 3 open, rest collapsed
    confidence_overall: overallConf,
    total_investment: {min:totalPriceMin, max:totalPriceMax},
    timeline: vars.timeline
  };
}

/* â”€â”€ Justification generator â€” Anthropic API â”€â”€ */
async function generateJustifications(u3Result, vars){
  const SECTOR_LBL={retail:'Ø§Ù„ØªØ¬Ø²Ø¦Ø©',ecommerce:'Ø§Ù„ØªØ¬Ø§Ø±Ø© Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©',b2b:'B2B ÙˆØ§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù…Ø¤Ø³Ø³ÙŠØ©',health:'Ø§Ù„ØµØ­Ø© ÙˆØ§Ù„Ø·Ø¨',education:'Ø§Ù„ØªØ¹Ù„ÙŠÙ…',fnb:'Ø§Ù„Ù…Ø·Ø§Ø¹Ù… ÙˆØ§Ù„Ø£ØºØ°ÙŠØ©',manufacturing:'Ø§Ù„ØªØµÙ†ÙŠØ¹',realestate:'Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª',professional:'Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù…Ù‡Ù†ÙŠØ©',other:'Ø£Ø®Ø±Ù‰'};
  const CHALLENGE_LBL={validation:'Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„ÙÙƒØ±Ø©',roadmap:'ØºÙŠØ§Ø¨ Ø®Ø§Ø±Ø·Ø© Ø§Ù„Ø·Ø±ÙŠÙ‚',bizplan:'Ø¨Ù†Ø§Ø¡ Ø®Ø·Ø© Ø§Ù„Ø¹Ù…Ù„',awareness:'Ø¶Ø¹Ù Ø§Ù„ÙˆØ¹ÙŠ Ø¨Ø§Ù„Ø¹Ù„Ø§Ù…Ø©',conversion:'Ø¶Ø¹Ù Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„',retention:'Ø¶Ø¹Ù Ø§Ù„Ø§Ø­ØªÙØ§Ø¸ Ø¨Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡',growth:'ØªØ³Ø±ÙŠØ¹ Ø§Ù„Ù†Ù…Ùˆ',cac:'Ø§Ø±ØªÙØ§Ø¹ ØªÙƒÙ„ÙØ© Ø§Ù„Ø§ÙƒØªØ³Ø§Ø¨',system:'ØºÙŠØ§Ø¨ Ø§Ù„Ø£Ù†Ø¸Ù…Ø© ÙˆØ§Ù„Ø£ØªÙ…ØªØ©'};
  const TYPE_LBL={startup:'Ù†Ø§Ø´Ø¦Ø©',smb:'ØµØºÙŠØ±Ø© ÙˆÙ…ØªÙˆØ³Ø·Ø©',enterprise:'Ù…Ø¤Ø³Ø³Ø© ÙƒØ¨Ø±Ù‰'};

  const blockList = u3Result.result_blocks.map(b=>({
    block_id:b.block_id,
    block_name:b.block_name,
    service_name:b.featured_service.name_ar,
    service_id:b.featured_service.id
  }));

  const prompt = `Ø£Ù†Øª ÙƒØ§ØªØ¨ ØªØ³ÙˆÙŠÙ‚ÙŠ Ø¹Ø±Ø¨ÙŠ Ù…ØªØ®ØµØµ. Ø³ØªÙÙ‚Ø±Ø£ Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù…ÙŠÙ„ ÙˆÙ‚Ø§Ø¦Ù…Ø© ØªÙˆØµÙŠØ§Øª Ø®Ø¯Ù…ÙŠØ©ØŒ Ø«Ù… ØªÙƒØªØ¨ Ø¬Ù…Ù„Ø© ØªØ¨Ø±ÙŠØ± ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø· Ù„ÙƒÙ„ ØªÙˆØµÙŠØ©.

Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„:
- Ø§Ù„Ù‚Ø·Ø§Ø¹: ${SECTOR_LBL[vars.sector]||vars.sector}
- Ø§Ù„ØªØ­Ø¯ÙŠ Ø§Ù„Ø£ÙƒØ¨Ø±: ${CHALLENGE_LBL[vars.challenge]||vars.challenge}
- Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…Ù„: ${TYPE_LBL[vars.type]||vars.type}
- Ø§Ù„Ù†Ø·Ø§Ù‚ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ: ${vars.geo_focus}
- Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ù…Ù†ØªØ¬: ${vars.product_stage||'â€”'}

Ø§Ù„ØªÙˆØµÙŠØ§Øª:
${blockList.map(b=>`- ${b.block_id}: ${b.block_name} â†’ Ø§Ù„Ø®Ø¯Ù…Ø©: "${b.service_name}"`).join('\n')}

Ø§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª:
1. Ø§ÙƒØªØ¨ Ø¬Ù…Ù„Ø© Ø¹Ø±Ø¨ÙŠØ© ÙˆØ§Ø­Ø¯Ø© Ù„ÙƒÙ„ block_id.
2. ÙŠØ¬Ø¨ Ø£Ù† ØªØ¨Ø¯Ø£ ÙƒÙ„ Ø¬Ù…Ù„Ø© Ø¨Ù€ "Ù†ÙÙˆØµÙŠ Ø¨Ù‡Ø§ Ù„Ø£Ù†".
3. ØªÙØ®Ø§Ø·Ø¨ Ø§Ù„Ø¬Ù…Ù„Ø© Ø£Ù„Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø£Ùˆ ØªØ­Ø¯ÙŠÙ‡ Ø§Ù„Ù…Ø­Ø¯Ø¯ØŒ ÙˆØªØ°ÙƒØ± Ø§Ù„Ù‚Ø·Ø§Ø¹ Ø£Ùˆ Ø§Ù„Ø³ÙŠØ§Ù‚ Ø¥Ù† Ø£Ù…ÙƒÙ†.
4. Ù„Ø§ ØªØµÙ Ø§Ù„Ø®Ø¯Ù…Ø© Ù†ÙØ³Ù‡Ø§ØŒ Ø¨Ù„ Ø§Ù„Ø­Ø§Ø¬Ø© Ø§Ù„ØªÙŠ ØªÙØ¹Ø§Ù„Ø¬Ù‡Ø§.
5. Ø£Ø¹ÙØ¯ JSON ÙÙ‚Ø· Ù„Ø§ ØºÙŠØ±ØŒ Ø¨Ù‡Ø°Ø§ Ø§Ù„Ø´ÙƒÙ„ Ø¨Ø§Ù„Ø¶Ø¨Ø·:
{"SEO":"Ù†ÙÙˆØµÙŠ Ø¨Ù‡Ø§ Ù„Ø£Ù†...","CRO":"Ù†ÙÙˆØµÙŠ Ø¨Ù‡Ø§ Ù„Ø£Ù†...",${blockList.map(b=>`"${b.block_id}":"..."`).join(',')}}
Ù„Ø§ ØªÙƒØªØ¨ Ø£ÙŠ Ù†Øµ Ø®Ø§Ø±Ø¬ JSON.`;

  try {
    const resp = await fetch('https://api.anthropic.com/v1/messages',{
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body:JSON.stringify({
        model:'claude-sonnet-4-20250514',
        max_tokens:1000,
        messages:[{role:'user',content:prompt}]
      })
    });
    const data = await resp.json();
    const text = data.content?.map(c=>c.text||'').join('');
    // Strip markdown fences if present
    const clean = text.replace(/```json|```/g,'').trim();
    const parsed = JSON.parse(clean);
    // Inject justifications into result blocks
    u3Result.result_blocks.forEach(b=>{
      if(parsed[b.block_id]) b.featured_service.justification = parsed[b.block_id];
    });
  } catch(e){
    // Graceful fallback: template-based justifications
    u3Result.result_blocks.forEach(b=>{
      const challenge = CHALLENGE_LBL[vars.challenge]||'ØªØ­Ø¯ÙŠÙƒ Ø§Ù„Ø­Ø§Ù„ÙŠ';
      const sector = SECTOR_LBL[vars.sector]||'Ù…Ø¬Ø§Ù„Ùƒ';
      b.featured_service.justification = `Ù†ÙÙˆØµÙŠ Ø¨Ù‡Ø§ Ù„Ø£Ù† ${b.block_name} Ù‡Ùˆ Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„Ù…Ø¨Ø§Ø´Ø± Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© ${challenge} ÙÙŠ Ø³ÙŠØ§Ù‚ ${sector}.`;
    });
  }
  return u3Result;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PIPELINE CONTROLLER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

/* â”€â”€ OUTPUT_B: CRM JSON â€” spec Â§4.3 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * Generates the full CRM lead record from Unit 3 output + original vars.
 * All 17 variables are passed through in profile (including budget_period
 * which was missing from the reference implementation â€” deviation fixed).
 * follow_up_script follows the spec pattern: "{sector}_{challenge}_template"
 * top_block = first selective block (highest ranked after SEO/CRO).
 * confidence_overall excludes the ANL anchor block (spec Â§4.5 note).
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function buildCRMOutput(u3, vars){
  // Collect all featured service IDs (excluding anchor for budget range)
  const allFeatured = u3.result_blocks
    .filter(b=>b.block_type!=='anchor')
    .map(b=>b.featured_service)
    .filter(Boolean);

  // Investment range from featured services only (not anchor ANL)
  const minBudget = allFeatured.reduce((s,f)=>s+(f.price_from||0),0);
  const maxBudget = allFeatured.reduce((s,f)=>s+(f.price_to||0),0);
  const budgetRange = `${minBudget.toLocaleString()} â€“ ${maxBudget.toLocaleString()} Ø±.Ø³`;

  // Top block = first selective block in ranked order
  const topBlock = u3.result_blocks.find(b=>b.block_type==='rank')?.block_id
                || u3.result_blocks.find(b=>b.block_type==='fixed')?.block_id;

  // confidence_overall = average of non-anchor blocks (spec Â§4.5)
  const confBlocks = u3.result_blocks.filter(b=>b.block_type!=='anchor');
  const confOverall = confBlocks.length
    ? Math.round(confBlocks.reduce((s,b)=>s+b.featured_service.confidence_match,0)/confBlocks.length)
    : u3.confidence_overall;

  const crm = {
    lead_data: {
      session_id:  u3.session_id,
      created_at:  new Date().toISOString(),
      source:      'web',
      contact: {
        company_name: null,   // populated after CTA-1 / CTA-2 form
        contact_name:  null,
        phone:         null,
        email:         null
      },
      profile: {
        // All 17 diagnostic variables â€” spec Â§1.4 output schema
        sector:             vars.sector,
        type:               vars.type,
        geo_focus:          vars.geo_focus,
        challenge:          vars.challenge,
        budget:             vars.budget,
        budget_raw:         vars.budget_raw,
        budget_period:      vars.budget_period,     // â† was missing from ref. impl., fixed
        execution_capacity: vars.execution_capacity,
        current_tools:      vars.current_tools,
        marketing_history:  vars.marketing_history,
        timeline:           vars.timeline,
        has_website:        vars.has_website,
        has_app:            vars.has_app ?? null,
        product_stage:      vars.product_stage ?? null,
        V:                  vars.V  ?? null,
        CR:                 vars.CR ?? null,
        main_channel:       vars.main_channel
      },
      diagnosis: {
        confidence_overall:     confOverall,
        blocks_shown:           u3.total_blocks_shown,
        top_block:              topBlock,
        recommended_services:   u3.result_blocks.map(b=>b.featured_service?.id).filter(Boolean),
        featured_services_ids:  allFeatured.map(f=>f.id),
        estimated_budget_range: budgetRange
      }
    },
    crm_fields: {
      lead_score:       confOverall,
      lead_stage:       'MQL',
      priority_tag:     `${vars.sector}-${vars.challenge}-${vars.execution_capacity}`,
      assigned_to:      null,
      // Spec Â§4.3: follow_up_script = "{sector}_{challenge}_template"
      follow_up_script: `${vars.sector}_${vars.challenge}_template`
    },
    // Raw Unit 2 scores passthrough â€” useful for sales team analytics
    _score_breakdown: vars._u2scores || null
  };

  return crm;
}
let _u2Result = null;

function showProcessing2(){
  document.querySelectorAll('.screen,.output-screen').forEach(s=>s.classList.remove('active'));
  document.getElementById('screen-proc2').classList.add('active');
  document.getElementById('progressArea').style.display='none';
  document.getElementById('unitTag').textContent='UNIT 2';
  // Animate steps
  setTimeout(()=>{ setStep('pstep1','done'); setStep('pstep2','active'); },400);
  setTimeout(()=>{ setStep('pstep2','done'); setStep('pstep3','active'); },800);
  setTimeout(()=>{
    setStep('pstep3','done');
    _u2Result = runUnit2(S.variables);
    renderU2Results(_u2Result);
  },1200);
}

function setStep(id,cls){
  const el=document.getElementById(id); if(!el)return;
  el.className='proc-step'; el.classList.add(cls);
}

function proceedToUnit3(){
  document.querySelectorAll('.screen,.output-screen').forEach(s=>s.classList.remove('active'));
  document.getElementById('screen-proc3').classList.add('active');
  document.getElementById('unitTag').textContent='UNIT 3';

  // Animate Unit 3 steps
  setTimeout(()=>{ setStep('u3step1','done'); setStep('u3step2','active'); },500);
  setTimeout(()=>{
    const u3 = runUnit3(_u2Result, S.variables); // deterministic selection
    setStep('u3step2','done'); setStep('u3step3','active');
    // Call API for justifications, then build CRM OUTPUT_B
    generateJustifications(u3, S.variables).then(u3Final=>{
      setStep('u3step3','done');
      // Build OUTPUT_B CRM JSON (spec Â§4.3) â€” must come AFTER justifications
      // so that the session_id and all block data are finalised
      const crmOutput = buildCRMOutput(u3Final, S.variables);
      window.__crmJSON = JSON.stringify(crmOutput, null, 2);
      setTimeout(()=>renderU3Results(u3Final), 300);
    });
  },1000);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   UNIT 2 RENDERER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const BK_LABELS={sector:'Ø§Ù„Ù‚Ø·Ø§Ø¹',challenge:'Ø§Ù„ØªØ­Ø¯ÙŠ',type:'Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…Ù„',budget:'Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©',channel:'Ø§Ù„Ù‚Ù†Ø§Ø©',V_modifier:'Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª',CR_modifier:'Ø§Ù„ØªØ­ÙˆÙŠÙ„',history_modifier:'Ø§Ù„ØªØ¬Ø±Ø¨Ø©',product_stage_modifier:'Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ù…Ù†ØªØ¬',tools_modifier:'Ø§Ù„Ø£Ø¯ÙˆØ§Øª'};

function renderU2Results(r){
  const timelineClass=r.timeline==='fast'?'fast':'sustained';
  const timelineLabel=r.timeline==='fast'?'âš¡ Ø®Ù„Ø§Ù„ 60 ÙŠÙˆÙ…Ø§Ù‹':'ğŸŒ± 6 Ø£Ø´Ù‡Ø±+';
  const MAX=35;

  function blockCard({block_id,block_name,icon,range,score,breakdown,cardClass,badgeHtml,showBar}){
    const pct=score!==null?Math.min(100,Math.round(score/MAX*100)):0;
    const bkId='bk_'+block_id;
    let bkHtml='';
    if(breakdown){
      bkHtml=`<button class="breakdown-toggle" onclick="toggleBK('${bkId}')">â–¾ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù†Ù‚Ø§Ø·</button>
      <div class="breakdown-panel" id="${bkId}">`;
      Object.entries(breakdown).forEach(([k,v])=>{
        if(v===0)return;
        const cls=v>0?'pos':v<0?'neg':'zero';
        bkHtml+=`<div class="bk-row"><span class="bk-label">${BK_LABELS[k]||k}</span><span class="bk-val ${cls}">${v>0?'+':''}${v}</span></div>`;
      });
      bkHtml+=`</div>`;
    }
    return `<div class="block-card ${cardClass}">
      <div class="block-card-inner">
        <div class="block-icon">${icon}</div>
        <div class="block-info"><div class="block-name">${block_name}</div><div class="block-range">${range}</div></div>
        ${badgeHtml}
        ${score!==null?`<div class="block-score-wrap"><div class="block-score-num">${score}</div><div class="block-score-label">Ù†Ù‚Ø·Ø©</div></div>`:''}
      </div>
      ${showBar&&score!==null?`<div class="score-bar-wrap"><div class="score-bar-track"><div class="score-bar-fill" data-pct="${pct}" style="width:0%"></div></div></div>`:''}
      ${bkHtml}
    </div>`;
  }

  let html=`
  <div class="results-header">
    <div class="results-icon">âœ“</div>
    <div><div class="results-title">Ù†ØªØ§Ø¦Ø¬ Ø§Ù„ØªØ´Ø®ÙŠØµ</div><div class="results-sub">Ø§Ù„ÙˆØ­Ø¯Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ© â€” Ù…Ø­Ø±Ùƒ Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ø­ØªÙ…ÙŠ</div></div>
    <div class="results-meta">
      <span class="meta-chip ${timelineClass}">${timelineLabel}</span>
      <span class="meta-chip quota">${r.blocks_to_show} ÙƒØªÙ„ Ø§Ù†ØªÙ‚Ø§Ø¦ÙŠØ©</span>
    </div>
  </div>`;

  if(r.warnings.length) html+=`<div class="warning-box visible">âš ï¸ <span>${r.warnings.join(' ')}</span></div>`;

  html+=`<div class="section-label">Ø«Ø§Ø¨ØªØ© â€” ØªØ¸Ù‡Ø± Ø¯Ø§Ø¦Ù…Ø§Ù‹</div><div class="blocks-list">`;
  r.fixed_blocks.forEach(id=>{
    const m=BLOCK_META[id];
    html+=blockCard({block_id:id,block_name:m.name,icon:m.icon,range:m.range,score:null,cardClass:'fixed-block',badgeHtml:`<span class="block-badge badge-fixed">Ø«Ø§Ø¨Øª</span>`,showBar:false});
  });
  html+=`</div>`;

  if(r.sector_blocks.length){
    html+=`<div class="section-label">Ù‚Ø·Ø§Ø¹ÙŠ â€” Ù…ÙØ¶Ø§Ù ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹</div><div class="blocks-list">`;
    r.sector_blocks.forEach(id=>{
      const m=BLOCK_META[id];
      html+=blockCard({block_id:id,block_name:m.name,icon:m.icon,range:m.range,score:null,cardClass:'sector-block',badgeHtml:`<span class="block-badge badge-sector">Ù‚Ø·Ø§Ø¹ÙŠ</span>`,showBar:false});
    });
    html+=`</div>`;
  }

  if(r.selective_blocks.length){
    html+=`<div class="section-label">Ø§Ù†ØªÙ‚Ø§Ø¦ÙŠØ© â€” Ù…Ø±ØªÙ‘Ø¨Ø© Ø¨Ø§Ù„Ù†Ù‚Ø§Ø·</div><div class="blocks-list">`;
    r.selective_blocks.forEach(b=>{
      const rk=b.rank===1?'r1':b.rank===2?'r2':b.rank===3?'r3':'rn';
      const cc=b.rank===1?'rank-1':b.rank===2?'rank-2':b.rank===3?'rank-3':'rank-other';
      html+=blockCard({block_id:b.block_id,block_name:b.block_name,icon:b.icon,range:b.range,score:b.score,breakdown:b.breakdown,cardClass:cc,badgeHtml:`<div class="badge-rank ${rk}">${b.rank}</div>`,showBar:true});
    });
    html+=`</div>`;
  }

  const anl=r.anchor_block;
  html+=`<div class="section-label">Ù…Ø±Ø³Ø§Ø© â€” Ø¯Ø§Ø¦Ù…Ø§Ù‹ ÙÙŠ Ø§Ù„Ø£Ø³ÙÙ„</div><div class="blocks-list">`;
  html+=blockCard({block_id:'ANL',block_name:anl.block_name,icon:anl.icon,range:anl.range,score:anl.score,breakdown:anl.breakdown,cardClass:'anchor-block',badgeHtml:`<span class="block-badge badge-anchor">Ù…Ø±Ø³Ø§Ø©</span>`,showBar:true});
  html+=`</div>`;

  if(r.excluded_blocks.length){
    html+=`<button class="excluded-toggle" onclick="toggleExcluded(this)">â–¼ Ø§Ù„ÙƒØªÙ„ Ø§Ù„Ù…Ø³ØªØ¨Ø¹Ø¯Ø© (${r.excluded_blocks.length})</button>
    <div class="excluded-list">`;
    r.excluded_blocks.forEach(ex=>{
      const m=BLOCK_META[ex.block_id];
      html+=`<div class="excluded-item"><span class="excluded-name">${m?m.icon:''} ${m?m.name:ex.block_id}</span><span class="excluded-reason">${ex.reason}</span><span class="excluded-score">${ex.score!==null?ex.score+'Ù†':'â€”'}</span></div>`;
    });
    html+=`</div>`;
  }

  const j2=JSON.stringify(r,null,2);
  window.__u2JSON=j2;
  html+=`<button class="json-toggle" onclick="toggleJSON(this)">{ } Ø¹Ø±Ø¶ JSON Ù„Ù„ÙˆØ­Ø¯Ø© Ø§Ù„Ø«Ø§Ù„Ø«Ø©</button>
  <div class="json-section"><div class="json-box">${escHtml(j2)}</div>
  <button class="copy-btn" onclick="copyJSON('__u2JSON')">ğŸ“‹ Ù†Ø³Ø® JSON</button></div>
  <button class="proceed-btn" onclick="proceedToUnit3()">Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø© â†’ Ø§Ù„ÙˆØ­Ø¯Ø© Ø§Ù„Ø«Ø§Ù„Ø«Ø©: Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø®Ø¯Ù…Ø§Øª</button>`;

  const el=document.getElementById('screen-u2results');
  el.innerHTML=html;
  document.querySelectorAll('.screen,.output-screen').forEach(s=>s.classList.remove('active'));
  el.classList.add('active');
  setTimeout(()=>{ document.querySelectorAll('.score-bar-fill').forEach(b=>{ b.style.width=b.dataset.pct+'%'; }); },100);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   UNIT 3 RENDERER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function renderU3Results(u3){
  const TYPE_CARD_CLASS={fixed:'type-fixed',sector:'type-sector',anchor:'type-anchor',rank:'type-rank-'};
  const OVERRIDE_LABELS={product_stage:'ØªØ¬Ø§ÙˆØ² Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ù…Ù†ØªØ¬',geo_focus:'ØªØ¬Ø§ÙˆØ² Ø¬ØºØ±Ø§ÙÙŠ',execution:'Ù…ØµÙÙˆÙØ© Ø§Ù„ØªÙ†ÙÙŠØ°'};

  let html=`
  <div class="results-header">
    <div class="results-icon" style="background:rgba(201,168,76,0.12);border-color:rgba(201,168,76,0.3)">â­</div>
    <div>
      <div class="results-title">Ø®Ø·Ø© Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù…ÙÙˆØµÙ‰ Ø¨Ù‡Ø§</div>
      <div class="results-sub">Ø§Ù„ÙˆØ­Ø¯Ø© Ø§Ù„Ø«Ø§Ù„Ø«Ø© â€” ${u3.total_blocks_shown} ÙƒØªÙ„Ø© | Ø«Ù‚Ø© Ø¥Ø¬Ù…Ø§Ù„ÙŠØ© ${u3.confidence_overall}%</div>
    </div>
    <div class="results-meta">
      <span class="meta-chip ${u3.timeline==='fast'?'fast':'sustained'}">${u3.timeline==='fast'?'âš¡ Ø³Ø±ÙŠØ¹':'ğŸŒ± Ù…Ø³ØªØ¯Ø§Ù…'}</span>
      <span class="meta-chip quota">${u3.total_blocks_shown} Ø®Ø¯Ù…Ø§Øª</span>
    </div>
  </div>`;

  u3.result_blocks.forEach((blk,i)=>{
    const typeClass = blk.block_type==='rank'
      ? `type-rank-${blk.block_rank<=1?1:blk.block_rank<=2?2:blk.block_rank<=3?3:'n'}`
      : `type-${blk.block_type}`;
    const isOpen = i < 3; // first 3 blocks open by default
    const f = blk.featured_service;
    const conf = f.confidence_match;
    const circumference = 2*Math.PI*22;
    const dashOffset = circumference - (conf/100)*circumference;

    // Foundation banner
    let foundationHtml='';
    if(blk.foundation_service){
      const fs=blk.foundation_service;
      foundationHtml=`<div class="foundation-banner">
        <span class="foundation-icon">â­</span>
        <div>
          <span class="foundation-label">Ø®Ø¯Ù…Ø© ØªØ£Ø³ÙŠØ³ÙŠØ© Ù…ÙÙˆØµÙ‰ Ø¨Ù‡Ø§ Ø£ÙˆÙ„Ø§Ù‹</span>
          <span class="foundation-name">#${fs.id} ${fs.name_ar}</span>
          <span class="foundation-sub"> â€” ${fs.price_from?.toLocaleString()} â€“ ${fs.price_to?.toLocaleString()} Ø±ÙŠØ§Ù„</span>
        </div>
      </div>`;
    }

    // Supporting services
    let suppHtml='';
    if(blk.supporting_services.length){
      suppHtml=`<div class="supporting-wrap">
        <div class="supporting-label">Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¯Ø§Ø¹Ù…Ø© â€” ${u3.timeline==='fast'?'Ø§Ù„Ø£Ø³Ø±Ø¹ Ø£Ø«Ø±Ø§Ù‹':'Ø§Ù„Ø£Ø·ÙˆÙ„ ØªØ±Ø§ÙƒÙ…Ø§Ù‹'}</div>
        <div class="supporting-list">`;
      blk.supporting_services.forEach(s=>{
        if(!s.name_ar)return;
        suppHtml+=`<div class="supporting-card">
          <div class="supp-name">#${s.id} ${s.name_ar}</div>
          <div class="supp-meta">
            <span class="supp-price">${s.price_from?.toLocaleString()} Ø±.Ø³</span>
          </div>
        </div>`;
      });
      suppHtml+=`</div></div>`;
    }

    html+=`
    <div class="rec-block ${typeClass} ${isOpen?'open':''}" id="rec-${blk.block_id}">
      <div class="rec-block-header" onclick="toggleRecBlock('${blk.block_id}')">
        <span class="rec-block-icon">${blk.block_icon}</span>
        <div class="rec-block-info">
          <div class="rec-block-name">${blk.block_name}</div>
          <div class="rec-block-subtitle">${blk.block_type==='rank'?`Ø§Ù„ØªØ±ØªÙŠØ¨ #${blk.block_rank} â€¢ ${blk.block_score||0} Ù†Ù‚Ø·Ø©`:blk.block_type==='fixed'?'Ø«Ø§Ø¨ØªØ© Ø¯Ø§Ø¦Ù…Ø§Ù‹':blk.block_type==='sector'?'Ù‚Ø·Ø§Ø¹ÙŠØ© â€” ØªØ¬Ø§Ø±Ø© Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©':'Ù…Ø±Ø³Ø§Ø© Ù‚ÙŠØ§Ø³ÙŠØ©'}</div>
        </div>
        <span class="rec-block-chevron">â–¼</span>
      </div>

      <div class="rec-block-body">
        ${foundationHtml}

        <div class="featured-svc">
          <div class="featured-badge">Ø§Ù„Ø®Ø¯Ù…Ø© Ø§Ù„Ù…ÙØ¨Ø±Ø²Ø©</div>

          <div class="featured-top">
            <div>
              <div class="featured-name">#${f.id} ${f.name_ar}</div>
              <div class="featured-id">${f.name_en}</div>
            </div>
            <!-- Confidence ring -->
            <div class="confidence-ring" title="Ù†Ø³Ø¨Ø© Ø§Ù„ØªØ·Ø§Ø¨Ù‚ Ù…Ø¹ Ù…Ù„ÙÙƒ">
              <svg width="54" height="54" viewBox="0 0 54 54">
                <circle class="track" cx="27" cy="27" r="22"/>
                <circle class="fill" cx="27" cy="27" r="22" stroke-dasharray="${circumference}" stroke-dashoffset="${dashOffset}"/>
              </svg>
              <div>
                <span class="confidence-num">${conf}</span>
                <span class="confidence-pct">%</span>
              </div>
            </div>
          </div>

          <div class="svc-meta-row">
            <span class="svc-chip chip-price">${f.price_from?.toLocaleString()} â€“ ${f.price_to?.toLocaleString()} Ø±ÙŠØ§Ù„</span>
            <span class="svc-chip chip-duration">â± ${f.duration}</span>
            ${f.override_type!=='execution'?`<span class="svc-chip chip-override">ğŸ“Œ ${OVERRIDE_LABELS[f.override_type]||f.override_type}</span>`:''}
          </div>

          <div class="justification-wrap">
            <div class="justification-label">Ø³Ø¨Ø¨ Ø§Ù„ØªÙˆØµÙŠØ©</div>
            <div class="justification-text ${f.justification?'':'loading'}">${f.justification||'Ø¬Ø§Ø±ÙŠ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ØªØ¨Ø±ÙŠØ±...'}</div>
          </div>

          <div class="svc-details">
            <div class="svc-detail-box">
              <span class="svc-detail-label">Ø§Ù„Ù…Ø¤Ø´Ø± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ</span>
              <div class="svc-detail-val">${f.kpi}</div>
            </div>
            <div class="svc-detail-box">
              <span class="svc-detail-label">Ø§Ù„Ø¶Ù…Ø§Ù†</span>
              <div class="svc-detail-val">${f.warranty}</div>
            </div>
          </div>
        </div>

        ${suppHtml}
      </div>
    </div>`;
  });

  // â”€â”€ Summary footer â”€â”€
  const minInv = u3.total_investment.min.toLocaleString();
  const maxInv = u3.total_investment.max.toLocaleString();
  html+=`
  <div class="summary-footer">
    <div class="summary-grid">
      <div class="summary-box"><div class="summary-val">${u3.total_blocks_shown}</div><div class="summary-label">Ø®Ø·Ø© Ø®Ø¯Ù…Ø© Ø´Ø§Ù…Ù„Ø©</div></div>
      <div class="summary-box"><div class="summary-val">${u3.confidence_overall}%</div><div class="summary-label">Ø«Ù‚Ø© Ø¥Ø¬Ù…Ø§Ù„ÙŠØ©</div></div>
      <div class="summary-box"><div class="summary-val" style="font-size:14px">${minInv}â€“${maxInv}</div><div class="summary-label">Ø§Ù„Ù†Ø·Ø§Ù‚ Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±ÙŠ (Ø±.Ø³)</div></div>
    </div>

    <!-- OUTPUT_A pipeline JSON â€” Unit 3 â†’ Unit 4 -->
    <button class="json-toggle" onclick="toggleJSON(this)">{ } OUTPUT_A â€” JSON Ø§Ù„ÙˆØ­Ø¯Ø© Ø§Ù„Ø±Ø§Ø¨Ø¹Ø© (Pipeline)</button>
    <div class="json-section">
      <div class="json-box">${escHtml(JSON.stringify(u3,null,2))}</div>
      <button class="copy-btn" onclick="copyJSON('__u3JSON')">ğŸ“‹ Ù†Ø³Ø® JSON Ù„Ù„ÙˆØ­Ø¯Ø© Ø§Ù„Ø±Ø§Ø¨Ø¹Ø©</button>
    </div>

    <!-- OUTPUT_B CRM JSON â€” spec Â§4.3 â€” sales team / HubSpot / Salesforce -->
    <button class="json-toggle" style="margin-top:10px;border-color:rgba(39,174,96,0.4);color:var(--success)" onclick="toggleJSON(this)">
      ğŸ“Š OUTPUT_B â€” CRM JSON (Lead Record Â· spec Â§4.3)
    </button>
    <div class="json-section">
      <div style="font-size:11px;color:var(--muted);margin-bottom:8px;padding:0 2px">
        ÙŠØªØ¶Ù…Ù† 17 Ù…ØªØºÙŠØ±Ø§Ù‹ ØªØ´Ø®ÙŠØµÙŠØ§Ù‹ ÙƒØ§Ù…Ù„Ø§Ù‹ Ø¨Ù…Ø§ ÙÙŠÙ‡Ø§ <strong>budget_period</strong> + follow_up_script + lead_score
      </div>
      <div class="json-box" style="color:#86efac">${escHtml(window.__crmJSON||'{}')}</div>
      <button class="copy-btn" onclick="copyJSON('__crmJSON')">ğŸ“‹ Ù†Ø³Ø® CRM JSON Ù„Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</button>
    </div>
  </div>`;

  window.__u3JSON = JSON.stringify(u3,null,2);
  // __crmJSON is already set in proceedToUnit3() before renderU3Results is called

  const el=document.getElementById('screen-u3results');
  el.innerHTML=html;
  document.querySelectorAll('.screen,.output-screen').forEach(s=>s.classList.remove('active'));
  el.classList.add('active');
  document.getElementById('unitTag').textContent='UNIT 3 âœ“';
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SHARED UTILITIES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function toggleBK(id){ document.getElementById(id)?.classList.toggle('open'); }
function toggleExcluded(btn){ const l=btn.nextElementSibling; l.classList.toggle('open'); btn.textContent=l.classList.contains('open')?btn.textContent.replace('â–¼','â–²'):btn.textContent.replace('â–²','â–¼'); }
function toggleJSON(btn){ btn.nextElementSibling?.classList.toggle('open'); }
function toggleRecBlock(id){
  const el=document.getElementById('rec-'+id); el?.classList.toggle('open');
}
function copyJSON(key){
  const txt=window[key]; if(!txt)return;
  navigator.clipboard.writeText(txt).then(()=>{
    const btn=event.target; btn.textContent='âœ… ØªÙ… Ø§Ù„Ù†Ø³Ø®!';
    setTimeout(()=>{ btn.textContent=btn.textContent.includes('Ø§Ù„Ø±Ø§Ø¨Ø¹Ø©')?'ğŸ“‹ Ù†Ø³Ø® JSON Ù„Ù„ÙˆØ­Ø¯Ø© Ø§Ù„Ø±Ø§Ø¨Ø¹Ø©':'ğŸ“‹ Ù†Ø³Ø® JSON'; },2000);
  });
}
function escHtml(s){ return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }

/* â”€â”€ Boot â”€â”€ */
init();
</script>
</body>
</html>
